"use strict";var __spreadArray=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,o=t.length;i<n;i++,o++)t[o]=e[i];return t},__extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ImageWindow=function(){var n=UIWDP.$(),e=UIWP.$(),i=UIWP.$(),o=UIWP.$(),r=UIWP.$(),a=UIWP.$(),s=UIWP.$(),h=UIWP.$(),I=UIWP.$(),u=UIWP.$(),t=UIWP.$();function g(t){e.updateUI(t),i.updateUI(t),o.updateUI(t),r.updateUI(t)}function l(i){n.updateUI(function(t){var e=t.getTheme();t.theme({primary:null!==(t=i.primary)&&void 0!==t?t:e.primary,secondary:null!==(t=i.secondary)&&void 0!==t?t:e.secondary,tertiary:null!==(t=i.tertiary)&&void 0!==t?t:e.tertiary})})}function d(){var t,e=(null!==(t=null===(t=a.ui)||void 0===t?void 0:t.getColor())&&void 0!==t?t:0)|(null!==(t=null===(t=I.ui)||void 0===t?void 0:t.getIsChecked())&&void 0!==t&&t?UIColorFlag.Translucent:0);g(function(t){return t.theme({primary:e})}),l({primary:e})}function p(){var t,e=(null!==(t=null===(t=s.ui)||void 0===t?void 0:t.getColor())&&void 0!==t?t:0)|(null!==(t=null===(t=u.ui)||void 0===t?void 0:t.getIsChecked())&&void 0!==t&&t?UIColorFlag.Translucent:0);g(function(t){return t.theme({secondary:e})}),l({secondary:e})}return UIWindow.$("StackUI Demo - Image",UIStack.$H(UIImageView.$(UIImageG2Logo).bind(e),UISpacer.$(),UIImageView.$(UIImageG2Title).bind(i)).spacing(4),UISpacer.$(),UIStack.$H(UIImageView.$(UIImage.$(5627)).bind(o),UISpacer.$(),UIImageView.$(UIImageTesting).bind(r)).spacing(4),UIStack.$H(UIStack.$VG(UIStack.$H(UILabel.$("Primary:"),UIColorPicker.$().bind(a).color(UIColor.LightBlue).name("primaryColorPicker"),UISpacer.$(),UICheckbox.$("Translucent",!0).bind(I)).spacing(2),UIStack.$H(UILabel.$("Secondary:"),UIColorPicker.$().bind(s).color(UIColor.Gray),UISpacer.$(),UICheckbox.$("Translucent",!0).bind(u)).spacing(2),UIStack.$H(UILabel.$("Tertiary:"),UIColorPicker.$().bind(h).color(UIColor.Yellow)).spacing(2)).title("Colors").spacing(2).padding({left:4,right:4})),UICheckbox.$("isExpandable",!0).bind(t)).bind(n).spacing(2),n.didLoad(function(t){var e={primary:null===(t=t.getUIWidget("primaryColorPicker"))||void 0===t?void 0:t.getColor(),secondary:null===(t=s.ui)||void 0===t?void 0:t.getColor(),tertiary:null===(t=h.ui)||void 0===t?void 0:t.getColor()};g(function(t){return t.theme(e)}),l(e)}),a.onChange(d),s.onChange(p),h.onChange(function(t){return i=null===(e=h.ui)||void 0===e?void 0:e.getColor(),g(function(t){return t.theme({tertiary:i})}),void l({tertiary:i});var e,i}),I.onChange(function(t){return d()}),u.onChange(function(t){return p()}),t.onChange(function(t,e){n.updateUI(function(t){return t.isExpandable(e)})}),n},ListWindow=function(){function t(t,e,i,n,o,r,a){return UITab.$(UIStack.$H(UIStack.$V(UISpacer.$(10),UIStack.$H(UILabel.$(1791..stringId()).isVisible(t),UIColorPicker.$(e).isVisible(t))),UISpacer.$(),UIStack.$V(UIButton.$(i.stringId(),!0).occupiedSize({width:0}).size({width:145}).tooltip(1948..stringId()),UILabel.$(1858..stringId(n)).occupiedSize({width:0})).offset({x:-70,y:-29}),UIStack.$H(UIToggleButton.$I(UIImageDemolish).size(25).tooltip(5300..stringId()),UIToggleButton.$I(UIImagePatrol).size(25).tooltip(1947..stringId()),UIButton.$I(UIImageMap).size(25).tooltip(2804..stringId()))),UIListView.$([UIListViewColumn.$W("Name",1),UIListViewColumn.$F("Orders",80),UIListViewColumn.$W("Status",2)]).bind(h[a]).offset({y:-6}).extends({bottom:6}).scrollbarType(UIScrollbarType.Vertical),UILabel.$(("0 "+o.stringId()).color(TextColor.Black)).bind(I[a]).size({width:200})).bind(s[a]).image(r)}var e=UIWDP.$(),s=__spreadArray([],Array(4)).map(function(t){return UITP.$()}),h=__spreadArray([],Array(4)).map(function(t){return UIWP.$()}),I=__spreadArray([],Array(4)).map(function(t){return UIWP.$()});return UIWindow.$T("StackUI Demo - List",t(!0,UIColor.BrightRed,1700,500,1859,UIImageTabStaffHandymen,0),t(!0,UIColor.LightBlue,1701,800,1860,UIImageTabStaffMechanics,1),t(!0,UIColor.Yellow,1702,600,1861,UIImageTabStaffSecurityGuards,2),t(!1,UIColor.BrightRed,1703,550,1862,UIImageTabStaffEntertainers,3)).bind(e).padding({left:1,bottom:-3}).theme({secondary:UIColor.LightPurple}).minSize({width:276,height:270}).maxSize({width:500,height:450}).isExpandable(!0).spacing(2),s[0].didLoad(function(t){console.log("tab 0 didLoad")}),s[0].didAppear(function(t){console.log("tab 0 didAppear");function e(){var i=map.getAllEntities("peep").filter(function(t){return"staff"===t.peepType}).sort(function(t,e){return t.id-e.id}).filter(function(t){return"handyman"===t.staffType});h[0].updateUI(function(t){var e=i.map(function(t){var e=t.name,i=1&t.orders?UIImageStaffOrdersSweeping.string():"",n=2&t.orders?UIImageStaffOrdersWaterFlowers.string():"",o=4&t.orders?UIImageStaffOrdersEmptyBins.string():"",r=8&t.orders?UIImageStaffOrdersMowing.string():"",t=1431..format(TextFormat.StringId);return UIListViewItem.$([e,""+i+n+o+r,t])});t.clearAllItems().addItems(e)}),I[0].updateUI(function(t){t.text((i.length+" "+1859..stringId()).color(TextColor.Black))})}context.subscribe("action.execute",function(t){t.action.includes("staff")&&e()}),e()}),s[1].didLoad(function(t){console.log("tab 1 didLoad")}),s[1].didAppear(function(t){console.log("tab 1 didAppear");function e(){var i=map.getAllEntities("peep").filter(function(t){return"staff"===t.peepType}).sort(function(t,e){return t.id-e.id}).filter(function(t){return"mechanic"===t.staffType});h[1].updateUI(function(t){var e=i.map(function(t){var e=t.name,i=1&t.orders?UIImageStaffOrdersInspectRides.string():"",n=2&t.orders?UIImageStaffOrdersFixRides.string():"",t=1431..format(TextFormat.StringId);return UIListViewItem.$([e,""+i+n,t])});t.clearAllItems().addItems(e)}),I[1].updateUI(function(t){t.text((i.length+" "+1860..stringId()).color(TextColor.Black))})}context.subscribe("action.execute",function(t){t.action.includes("staff")&&e()}),e()}),s[2].didLoad(function(t){console.log("tab 2 didLoad")}),s[2].didAppear(function(t){console.log("tab 2 didAppear");function e(){var i=map.getAllEntities("peep").filter(function(t){return"staff"===t.peepType}).sort(function(t,e){return t.id-e.id}).filter(function(t){return"security"===t.staffType});h[2].updateUI(function(t){var e=i.map(function(t){var e=t.name,t=1431..format(TextFormat.StringId);return UIListViewItem.$([e,"",t])});t.clearAllItems().addItems(e)}),I[2].updateUI(function(t){t.text((i.length+" "+1861..stringId()).color(TextColor.Black))})}context.subscribe("action.execute",function(t){t.action.includes("staff")&&e()}),e()}),s[3].didLoad(function(t){console.log("tab 3 didLoad")}),s[3].didAppear(function(t){console.log("tab 3 didAppear");function e(){var i=map.getAllEntities("peep").filter(function(t){return"staff"===t.peepType}).sort(function(t,e){return t.id-e.id}).filter(function(t){return"entertainer"===t.staffType});console.log(i),h[3].updateUI(function(t){var e=i.map(function(t){var e=t.name,i=UIImage.$(5118+t.costume).string(),t=1431..format(TextFormat.StringId);return UIListViewItem.$([e,i,t])});t.clearAllItems().addItems(e)}),I[3].updateUI(function(t){t.text((i.length+" "+1862..stringId()).color(TextColor.Black))})}context.subscribe("action.execute",function(t){t.action.includes("staff")&&e()}),e()}),e.didLoad(function(t){console.log("window didLoad")}),e.didAppear(function(t){console.log("window didAppear")}),e},ViewportWindow=function(){var t=UIWDP.$(),e=UIWP.$(),i=UIWP.$(),n=UIWP.$(),o=UIWP.$(),r=UIWP.$(),a=UIWP.$(),s=UIWP.$(),h=UIWP.$(),I=UIWP.$(),u=UIWP.$(),g=UIWP.$(),l=UIWP.$(),d=UIWP.$(),p=UIWP.$(),c=UIWP.$(),m=UIWP.$();function _(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];g.updateUI(function(t){var e=t.getFlags();i?t.flags(e|n.reduce(function(t,e){return t|e})):t.flags(e^n.reduce(function(t,e){return t^e}))})}function U(t){var e=0==t;l.updateUI(function(t){t.isDisabled(e)});var i=3==t;d.updateUI(function(t){t.isDisabled(i)})}return UIWindow.$("StackUI Demo - Viewport",UIStack.$H(UIStack.$V(UIStack.$HG(UIStack.$V(UIStack.$H(UIStack.$V(UICheckbox.$("Hide").bind(e),UICheckbox.$("Rights").bind(i),UICheckbox.$("Heights").bind(n)),UIStack.$V(UICheckbox.$("SoundOn").bind(o),UICheckbox.$("Invisible").bind(r),UICheckbox.$("Seethrough").bind(a)),UIStack.$V(UICheckbox.$("ClipView").bind(s),UICheckbox.$("Guidelines").bind(h))).spacing(2),UIStack.$V(UICheckbox.$("Underground Inside").bind(I),UICheckbox.$("Transparent Background").bind(u)))).title("Flags").padding({right:2,left:2}),UIViewport.$().bind(g)),UIStack.$V(UIButton.$I(UIImageG2ZoomIn).bind(l).size(25),UIButton.$I(UIImageG2ZoomOut).bind(d).size(25),UIButton.$I(UIImageLocate).bind(p).size(25),UIButton.$I(UIImageRotateArrow).bind(c).size(25),UISpacer.$(),UIButton.$I(UIImageG2Search).bind(m).size(25),UISpacer.$(10)))).bind(t).isExpandable(!0).spacing(2),e.onChange(function(t,e){_(e,UIViewportFlag.HideBase,UIViewportFlag.HideVertical)}),i.onChange(function(t,e){_(e,UIViewportFlag.LandOwnership,UIViewportFlag.ConstructionRights)}),n.onChange(function(t,e){_(e,UIViewportFlag.LandHeights,UIViewportFlag.TrackHeights,UIViewportFlag.PathHeights)}),o.onChange(function(t,e){_(e,UIViewportFlag.SoundOn)}),r.onChange(function(t,e){_(e,UIViewportFlag.InvisibleSupports,UIViewportFlag.InvisiblePeeps,UIViewportFlag.InvisibleSprites)}),a.onChange(function(t,e){_(e,UIViewportFlag.SeethroughRides,UIViewportFlag.SeethroughScenery,UIViewportFlag.SeethroughPaths)}),s.onChange(function(t,e){_(e,UIViewportFlag.ClipView)}),h.onChange(function(t,e){_(e,UIViewportFlag.Gridlines)}),I.onChange(function(t,e){_(e,UIViewportFlag.UndergroundInside)}),u.onChange(function(t,e){_(e,UIViewportFlag.TransparentBackground)}),g.didLoad(function(t){U(t.getZoom())}),l.onClick(function(t){g.updateUI(function(t){var e=t.getZoom()-1;t.zoom(e),U(e)})}),d.onClick(function(t){g.updateUI(function(t){var e=t.getZoom()+1;t.zoom(e),U(e)})}),p.onClick(function(t){var e;null!==(e=g.ui)&&void 0!==e&&e.mainViewportScrollToThis()}),c.onClick(function(t){g.updateUI(function(t){var e=(t.getRotation()+1)%4;t.rotation(e)})}),m.onClick(function(t){var e;null!==(e=g.ui)&&void 0!==e&&e.moveToMainViewportCenter()}),t},BasicWindow=function(){var t=UIWDP.$(),e=UIWP.$(),i=UIWP.$(),n=UIWP.$(),o=UIWP.$(),r=TB.$(TN.$(TN.$I(UIImageShopItemChips),TN.$(TN.$S("Chips\n..."),TN.$(TN.$S(1432..format(TextFormat.StringId,53)).color(TextColor.BabyBlue),TN.$NL()).outline()).color(TextColor.Celadon),TN.$S(767..format(TextFormat.StringId,77)),TN.$I(UIImageShopItemDoughnut),TN.$I(UIImageShopItemIceCream)).color(TextColor.Topaz)).build();return UIWindow.$("StackUI Demo - Basic",UIStack.$VG(UILabel.$(r,!0)).title("Label"),UIStack.$HG(UIStack.$HG(UICheckbox.$("checkbox")).title("Basic"),UIStack.$HG(UICheckbox.$UN(),UICheckbox.$UN(),UICheckbox.$UN(),UICheckbox.$UN()).title("Unnamed")).title("Checkbox"),UIStack.$HG(UIColorPicker.$(UIColor.BrightRed),UIColorPicker.$(UIColor.LightOrange),UIColorPicker.$(UIColor.BrightYellow),UIColorPicker.$(UIColor.BrightGreen),UIColorPicker.$(UIColor.LightBlue),UIColorPicker.$(UIColor.DarkBlue),UIColorPicker.$(UIColor.LightPurple)).title("ColorPicker"),UIStack.$VG(UIDropdown.$(["Item1","Item2","Item3"]).selected(1)).title("Dropdown"),UIStack.$VG(UISpinner.$()).title("Spinner"),UIStack.$VG(UITextBox.$()).title("TextBox"),UIStack.$HG(UIStack.$HG(UIButton.$("button",!0).bind(e),UIButton.$I(UIImageGuests).bind(i)).title("Basic"),UIStack.$HG(UIToggleButton.$("button").bind(n),UIToggleButton.$I(UIImageTabPaint).bind(o)).title("Toggle"),UIStack.$HG(UIPageImageButton.$IP.apply(UIPageImageButton,[UIImageAwardBestValue,UIImageAwardMostBeautiful,UIImageAwardBestStaff])).title("Paging")).title("Button"),UISpacer.$(10)).bind(t).isExpandable(!0),e.onClick(function(){i.updateUI(function(t){t.isDisabled(!t.getIsDisabled())})}),o.onClick(function(){n.updateUI(function(t){t.isVisible(!t.getIsVisible())})}),t},MainWindow=function(){var t=UIWDP.$(),e=UITP.$(),i=UITP.$(),n=UITP.$(),o=UITP.$(),r=UITP.$(),a=UIWP.$(),s=BasicWindow(),h=UIWP.$(),I=ViewportWindow(),u=UIWP.$(),g=ListWindow(),l=UIWP.$(),d=ImageWindow(),p=UIWP.$(),c=UIWP.$(),m=UIWP.$(),_=UIWP.$(),U=UIWP.$(),f=UIWP.$(),v=UIWP.$(),y=UIWP.$();return UIWindow.$T("StackUI Demo",UITab.$(UIButton.$("Basic").bind(a),UIButton.$("Viewport").bind(h),UIButton.$("List").bind(u),UIButton.$("Image").bind(l),UISpacer.$(8),UICheckbox.$("isHidden of tab2").bind(p),UICheckbox.$("isHidden of tab3").bind(c),UICheckbox.$("isHidden of tab4").bind(m),UICheckbox.$("isHidden of tab5").bind(_),UISpacer.$(10)).bind(e).isExpandable(!0),UITab.$(UIImageView.$(UIImageMenuLogo),UIButton.$("Update and move to first tab").bind(y)).bind(i).title("StackUI Demo - 2"),UITab.$(UIButton.$("Hide this tab").bind(U)).bind(n).image(UIImageTabTimer),UITab.$(UIButton.$("Hide this tab").bind(f)).bind(o).image(UIImageTabPaint),UITab.$(UIButton.$("Hide this tab").bind(v)).bind(r).image(UIImageTabMusic)).bind(t).spacing(2).origin({x:ui.width/2,y:ui.height/4}),a.onClick(function(t){s.show()}),h.onClick(function(t){I.show()}),u.onClick(function(t){g.show()}),l.onClick(function(t){d.show()}),p.onChange(function(t,e){i.updateUI(function(t){t.isHidden(e)})}),c.onChange(function(t,e){n.updateUI(function(t){t.isHidden(e)})}),m.onChange(function(t,e){o.updateUI(function(t){t.isHidden(e)})}),_.onChange(function(t,e){r.updateUI(function(t){t.isHidden(e)})}),U.onClick(function(t){var e;n.updateUI(function(t){t.isHidden(!0)}),null!==(e=c.ui)&&void 0!==e&&e.isChecked(!0)}),f.onClick(function(t){var e;o.updateUI(function(t){t.isHidden(!0)}),null!==(e=m.ui)&&void 0!==e&&e.isChecked(!0)}),v.onClick(function(t){var e;r.updateUI(function(t){t.isHidden(!0)}),null!==(e=_.ui)&&void 0!==e&&e.isChecked(!0)}),y.onClick(function(e){i.updateUI(function(t){t.title("Updated!"),t.theme({primary:UIColor.DarkBlue}),t.image(UIImageTabStaffOptions),t.isExpandable(!0),t.padding(10),t.spacing(8),t.maxSize({height:600})}),e.updateUI(function(t){e.title("Move to first tab")}),t.updateUI(function(t){t.selectedTabIndex(0)})}),t.onClose(function(t){s.close(),I.close(),g.close(),d.close()}),t},main=function(){var t,e;"undefined"!=typeof ui?(e=function(){(t=void 0===t?MainWindow():t).show()},ui.registerMenuItem("StackUI Demo",e),ui.registerShortcut({id:"stackui.demo",text:"StackUI Demo",bindings:["ALT+S+D"],callback:e})):console.log("Plugin not available on headless mode.")};registerPlugin({name:"StackUI Demo",version:"1.0.0",authors:["nExmond"],type:"local",licence:"MIT",main:main});var TextFormat,IntervalHelper=function(){function t(){this._intervalInfos={}}return t.prototype.start=function(t,e,i){this._intervalInfos[t]={id:-1,delay:e,block:i,enabled:!1}},t.prototype.enabled=function(t,e){t=this._intervalInfos[t];void 0!==t&&t.enabled!==e&&((t.enabled=e)?t.id=context.setInterval(t.block,t.delay):context.clearInterval(t.id))},t.prototype.end=function(t){var e=this._intervalInfos[t];void 0!==e&&(context.clearInterval(e.id),delete this._intervalInfos[t])},t}(),intervalHelper=new IntervalHelper,UIInteractor=function(){function t(){}return t.prototype._findWidget=function(t){this.__findWidget=t},t.prototype._update=function(t,e){t=this.__findWidget(t);void 0!==t&&e(t)},t.prototype._refreshTab=function(t){this._refreshWindowTab=t},t.prototype._refresh=function(t){this._refreshWindow=t},t.prototype._windowTheme=function(t){this.__windowTheme=t},t.prototype.refreshWindow=function(){this._refreshWindow()},t.prototype.refreshWindowTab=function(t){this._refreshWindowTab(t)},t.prototype.getWindowTheme=function(){return this.__windowTheme()},t}(),UIOptionalSizeDefault={},UISizeZero={width:0,height:0};function uuid(){for(var t,e="",i=0;i<32;i++)t=16*Math.random()|0,8!=i&&12!=i&&16!=i&&20!=i||(e+="-"),e+=(12==i?4:16==i?3&t|8:t).toString(16);return e}!function(t){t.Comma16="COMMA16",t.Comma32="COMMA32",t.Comma1dp16="COMMA1DP16",t.Comma2dp32="COMMA2DP32",t.Int32="Int32",t.UInt16="UINT16",t.Currency="CURRENCY",t.Currency2dp="CURRENCY2DP",t.MonthYear="MONTHYEAR",t.Month="MONTH",t.DurationShort="DURATION",t.DurationLong="REALTIME",t.Velocity="VELOCITY",t.Length="LENGTH",t.StringId="STRINGID"}(TextFormat=TextFormat||{}),Array.prototype.flatMapFunc=function(i){return 0<(i=void 0===i?1:i)?this.reduce(function(t,e){return t.concat(Array.isArray(e)?e.flatMapFunc(i-1):e)},[]):this.slice()},Array.prototype.flatMap=function(){return this.flatMapFunc(1)},Array.prototype.compactMap=function(){return this.filter(function(t){return void 0!==t})},Array.prototype.sum=function(){return this.reduce(function(t,e){return t+e},0)},Array.prototype.min=function(){return this.reduce(function(t,e){return Math.min(t,e)},0)},Array.prototype.max=function(){return this.reduce(function(t,e){return Math.max(t,e)},0)},Array.prototype.first=function(t){t=this.filter(t);if(0<t.length)return t[0]},Array.prototype.firstIndex=function(t){for(var e=0;e<this.length;e++)if(t(this[e]))return e;return-1},String.prototype.size=function(){var i=imageHelper.graphicsContext(),t=UISizeZero,e=new RegExp(/{INLINE_SPRITE}{(\d{1,3})}{\d{1,3}}{\d{1,3}}/g),n=this.match(e);n&&(console.log("WARNING: Images inserted in text may be displayed incorrectly."),t=(null!==(n=n.map(function(t){t=t.split("{").map(function(t){return t.split("}")}).flatMap().filter(function(t,e){return e%2==1});return 65536*parseInt(t[3])+256*parseInt(t[2])+parseInt(t[1])}))&&void 0!==n?n:[]).map(function(t){var e=null==i?void 0:i.getImage(t);return{width:null!==(t=null==e?void 0:e.width)&&void 0!==t?t:0,height:null!==(e=null==e?void 0:e.height)&&void 0!==e?e:0}}).reduce(function(t,e){return{width:t.width+e.width,height:Math.max(t.height,e.height)}}));var e=this.split(e),e=null!==(e=null==i?void 0:i.measureText(e.join("")))&&void 0!==e?e:UISizeZero;return{width:e.width+t.width,height:Math.max(e.height,t.height)}},String.prototype.containerSize=function(){var t=this.toString().size();return{width:t.width+5,height:t.height+5}},String.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.toString(),n=0,o=t;n<o.length;n++)var r=o[n],i=i.split(r).join("");return i},String.prototype.toClearString=function(){return this.toString().split("{").map(function(t){return t.split("}")}).flatMap().filter(function(t,e){return e%2==0}).join("")},String.prototype.format=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return context.formatString.apply(context,__spreadArray(["{"+t+"}",this.toString()],e))},Number.prototype.format=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return context.formatString.apply(context,__spreadArray(["{"+t+"}",this.valueOf()],e))},Number.prototype.stringId=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.format.apply(this,__spreadArray([TextFormat.StringId],t))},String.prototype.color=function(t){return TB.$(this.toString()).color(t).build()},String.prototype.outline=function(){return TB.$(this.toString()).outline().build()},String.prototype.font=function(t){return TB.$(this.toString()).font(t).build()},Number.prototype.imageString=function(){var t=Math.floor(this.valueOf()),e=Math.floor(t/65536);return"{INLINE_SPRITE}{"+t%256+"}{"+Math.floor(t/256)+"}{"+e+"}{0}"};var TextColor,TextFont,UIOptionalPointDefault={},UIPointZero={x:0,y:0},ImageHelper=function(){function t(){this._open()}return t.prototype._open=function(){var e=this,i=ui.openWindow({classification:"_GC_",x:0,y:0,width:15,height:15,title:"",widgets:[{x:0,y:0,width:15,height:15,type:"custom",onDraw:function(t){e._graphicsContext=t,i.x=-20}}],onClose:function(){var t=context.setTimeout(function(){e._open(),context.clearTimeout(t)},1)}});console.log("A custom widget that supports GraphicsContext has been opened.")},t.prototype.graphicsContext=function(){return this._graphicsContext},t}(),imageHelper=new ImageHelper;!function(t){t.WindowPrimary="WINDOW_COLOUR_1",t.WindowSecondary="WINDOW_COLOUR_2",t.WindowTertiary="WINDOW_COLOUR_3",t.Black="BLACK",t.Gray="GREY",t.White="WHITE",t.Red="RED",t.Green="GREEN",t.Yellow="YELLOW",t.Topaz="TOPAZ",t.Celadon="CELADON",t.BabyBlue="BABYBLUE",t.PaleLavender="PALELAVENDER",t.PaleGold="PALEGOLD",t.LightPink="LIGHTPINK",t.PearlAqua="PEARLAQUA",t.PaleSilver="PALESILVER"}(TextColor=TextColor||{}),function(t){t.Tiny="TINYFONT",t.Small="SMALLFONT",t.Medium="MEDIUMFONT",t.Big="BIGFONT"}(TextFont=TextFont||{});var UIAxis,UIImage=function(){function o(t){this._frames=[],this._duration=2,this._baseOffset=UIPointZero,this._offset=UIPointZero,this._frames=t}return o.$=function(t){var e,i=new o([t]);return i._baseOffset=null!==(t=null===(t=null===(e=imageHelper.graphicsContext())||void 0===e?void 0:e.getImage(t))||void 0===t?void 0:t.offset)&&void 0!==t?t:UIPointZero,i},o.$A=function(i,t,e){var n=new o(__spreadArray([],Array(t)).map(function(t,e){return i+e}));return n._baseOffset=null!==(t=null===(t=null===(t=imageHelper.graphicsContext())||void 0===t?void 0:t.getImage(i))||void 0===t?void 0:t.offset)&&void 0!==t?t:UIPointZero,n.duration(e)},o.$F=function(t,e){var i,n=new o(t);return n._baseOffset=null!==(t=null===(t=null===(i=imageHelper.graphicsContext())||void 0===i?void 0:i.getImage(t[0]))||void 0===t?void 0:t.offset)&&void 0!==t?t:UIPointZero,n.duration(e)},o.prototype._data=function(t){var e=this._frames.length;if(t=void 0===t?!1:t){this._frames.reduce(function(t,e){return e===t+1?e:t}),this._frames[this._frames.length-1];return{frameBase:this._frames[0],frameCount:this._frames.length,frameDuration:this._duration,offset:{x:this._baseOffset.x+this._offset.x,y:this._baseOffset.y+this._offset.y}}}return 0<e?this._frames[0]:-1},o.prototype._getFrames=function(){return this._frames},o.prototype.isAnimatable=function(){return 1<this._frames.length},o.prototype.duration=function(t){return this._duration=t,this},o.prototype.getDuration=function(){return this._duration},o.prototype.offset=function(t){return this._offset=t,this},o.prototype.getOffset=function(){return this._offset},o.prototype.singleFrame=function(){return this._frames[0]},o.prototype.isEqual=function(t){return this._frames.map(function(t){return t.toString()}).reduce(function(t,e){return t+"-"+e})===t._frames.map(function(t){return t.toString()}).reduce(function(t,e){return t+"-"+e})},o.prototype.size=function(){var e=imageHelper.graphicsContext();return this._frames.map(function(t){t=null==e?void 0:e.getImage(t);return void 0!==t?{width:t.width+Math.max(t.offset.x,0),height:t.height+Math.max(t.offset.y,0)}:UISizeZero}).reduce(function(t,e){return{width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)}})},o.prototype.description=function(){return"Duration: "+this._duration+"\nFrames: "+this._frames.map(function(t){return t.toString()}).reduce(function(t,e){return t+"-"+e})},o.prototype.string=function(){return this.singleFrame().imageString()},o}(),TextNode=function(){function s(t){this._childs=[],this._outline=!1,this._childs=t}return s.$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new s(t)},s.$S=function(t){return new StringNode(t)},s.$I=function(t){return new ImageNode(t)},s.$NL=function(t){return new _NewlineNode(t=void 0===t?!1:t)},s.prototype._isLeaf=function(){return 0===this._childs.length},s.prototype._isStopover=function(){return 0<this._childs.length},s.prototype._isValid=function(){return!0},s.prototype._text=function(){return this._childs.map(function(t){return t._text()}).join("")},s.prototype._unifyNewline=function(o){var r=void 0!==(o=void 0===o?void 0:o),a=r&&o===TextFont.Tiny;if(this._isStopover())for(var t=this._childs.length,e=this,i=0;i<t;i++)!function(){var t,n=e._childs[i];n._isLeaf()&&n instanceof StringNode?1<(t=n._getString().split("\\n")).length&&(t=t.map(function(t,e,i){t=new StringNode(t,!1);t._outline=n._outline,t._color=n._color;t=[t];return e<i.length-1&&(t.push(new _NewlineNode(a)),r&&t.push(new _FontNode(o))),t}).reduce(function(t,e){return t.concat(e)}),t=s.$.apply(s,t),e._childs[i]=t):n._unifyNewline(o)}()},s.prototype._unifyOutline=function(t){if(void 0===t&&(t=!1),this._isLeaf()&&this instanceof StringNode)t?this._setString(this._getString().remove("{OUTLINE}").remove("{OUTLINE_OFF}")):this._outline&&this._isPureString()&&this._setString("{OUTLINE}"+this._getString()+"{OUTLINE_OFF}");else if(this._isStopover()){var e=this._childs;if(0<e.length){for(var i=t||this._outline,n=0,o=e;n<o.length;n++)o[n]._unifyOutline(i);if(i)for(var r,a=!0,s=0;s<e.length;s++){var h=this._childs[s];a&&h instanceof StringNode&&(h._setString("{OUTLINE}"+h._getString()),a=!1),h instanceof _NewlineNode&&(void 0!==r&&r._setString(r._getString()+"{OUTLINE_OFF}"),a=!0),h instanceof StringNode&&(r=h,s>=this._childs.length-1&&h._setString(h._getString()+"{OUTLINE_OFF}"))}}}},s.prototype._unifyColor=function(t){var e;void 0===t&&(t=void 0);var i=null!==(t=null!==(e=this._color)&&void 0!==e?e:t)&&void 0!==t?t:TextColor.WindowSecondary;if(this._isLeaf()&&this._isPureString()&&this instanceof StringNode)this._setString("{"+i+"}"+this._getString());else if(this._isStopover())for(var n=0,o=this._childs;n<o.length;n++)o[n]._unifyColor(i)},s.prototype.__leafs=function(){if(this._isLeaf())return[this];return this._childs.map(function(t){return t.__leafs()}).flatMap()},s.prototype._description=function(i,t){void 0===i&&(i=0),void 0===t&&(t=void 0);var e=__spreadArray([],Array(i)).map(function(t){return"│ "}).join(""),n=e+"│ ",o="[]";return void 0!==this._childs&&0<this._childs.length&&(o="["+this._childs.map(function(t,e){return t._description(i+1,e)}).join(",")+"]"),(void 0!==t?"["+t+"]":"")+"{\n"+n+"type: "+this.constructor.name+","+(this instanceof StringNode?"\n"+n+"string: "+this._getString()+",":"")+"\n"+n+"outline: "+this._outline+",\n"+n+"color: "+this._color+",\n"+n+"childs: "+o+"\n"+e+"}"},s.prototype._isPureString=function(){return this instanceof ImageNode==!1&&!this._isPrivate()},s.prototype._isPrivate=function(){return this instanceof _NewlineNode||this instanceof _FontNode},s.prototype.outline=function(t){return this._outline=t=void 0===t?!0:t,this},s.prototype.color=function(t){return this._color=t,this},s}(),TN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(TextNode),TextBuilder=function(){function e(t){this._outline=!1,this._root="string"==typeof t||void 0===t?StringNode.$S(t):t}return e.$=function(t){return new e(t)},e.prototype._text=function(){return(void 0!==this._font?"{"+this._font+"}":"")+this._root._text()},e.prototype.build=function(){return this._root._unifyNewline(this._font),this._root._unifyColor(this._color),this._root._unifyOutline(this._outline),this._text()},e.prototype.font=function(t){return this._font=t,this},e.prototype.outline=function(){return this._outline=!0,this},e.prototype.color=function(t){return this._color=t,this},e.prototype.description=function(){return this._root._description()},e}(),TB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(TextBuilder),StringNode=function(n){function t(t,e){void 0===e&&(e=!0);var i=n.call(this,[])||this;return i._string=e?t.split("\n").join("\\n"):t,i}return __extends(t,n),t.prototype._isValid=function(){return this._isLeaf()},t.prototype._text=function(){return this._getString()},t.prototype._getString=function(){return this._string},t.prototype._setString=function(t){this._string=t},t}(TextNode),ImageNode=function(e){function t(t){t=t.singleFrame().imageString();return e.call(this,t,!1)||this}return __extends(t,e),t}(StringNode),_NewlineNode=function(e){function t(t){return e.call(this,(t=void 0===t?!1:t)?"{NEWLINE_SMALLER}{NEWLINE_SMALLER}":"{NEWLINE}",!1)||this}return __extends(t,e),t}(StringNode),_FontNode=function(e){function t(t){return e.call(this,"{"+t+"}",!1)||this}return __extends(t,e),t}(StringNode),UIOptionalEdgeInsetsDefault={},UIEdgeInsetsZero={top:0,left:0,bottom:0,right:0},UIEdgeInsetsContainer={top:16,left:2,bottom:2,right:2},UIEdgeInsetsTabContainer={top:45,left:2,bottom:2,right:2};!function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal"}(UIAxis=UIAxis||{});var UIColor,UIColorFlag,UIWidget=function(){function t(){this._origin=UIPointZero,this._size=UIOptionalSizeDefault,this._isDisabled=!1,this._isVisible=!0,this._minSize=UISizeZero,this._offset=UIPointZero,this._extends=UIEdgeInsetsZero,this._name=this.constructor.name+"-"+uuid()}return t.prototype._getUIWidgets=function(){return[this]},t.prototype._getWidgets=function(){return[this._widget]},t.prototype._estimatedSize=function(){var t,e=this._minSize;return{width:null!==(t=null!==(t=null===(t=this._occupiedSize)||void 0===t?void 0:t.width)&&void 0!==t?t:this._size.width)&&void 0!==t?t:e.width,height:null!==(t=null!==(t=null===(t=this._occupiedSize)||void 0===t?void 0:t.height)&&void 0!==t?t:this._size.height)&&void 0!==t?t:e.height}},t.prototype._isUndefinedSize=function(t){switch(t){case UIAxis.Vertical:return void 0===this._size.height;case UIAxis.Horizontal:return void 0===this._size.width}},t.prototype._layout=function(t,e,i){void 0===this._initialSize&&(this._initialSize=this._size),this._origin={x:e.x+this._extends.left+this._offset.x,y:e.y+this._extends.top+this._offset.y};var n={width:null!==(n=this._size.width)&&void 0!==n?n:i.width,height:null!==(n=this._size.height)&&void 0!==n?n:i.height};this._size={width:n.width+this._extends.left+this._extends.right-1,height:n.height+this._extends.top+this._extends.bottom};var o=null!==(i=null===(i=this._occupiedSize)||void 0===i?void 0:i.width)&&void 0!==i?i:n.width,r=null!==(i=null===(i=this._occupiedSize)||void 0===i?void 0:i.height)&&void 0!==i?i:n.height;switch(t){case UIAxis.Vertical:return{x:e.x,y:e.y+r};case UIAxis.Horizontal:return{x:e.x+o,y:e.y}}},t.prototype._build=function(){throw new Error("Method not implemented.")},t.prototype._update=function(t){var e;if(!t)throw new Error("You cannot change the properties of a widget that is not currently drawn on the screen!\nPlease try again after the widget is displayed!\n"+this.description());t.x=this._origin.x,t.y=this._origin.y,t.width=(null!==(e=this._size.width)&&void 0!==e?e:0)-1,t.height=(null!==(e=this._size.height)&&void 0!==e?e:0)-1,t.tooltip=this._tooltip,t.isDisabled=this._isDisabled,t.isVisible=this._isVisible},t.prototype._buildBaseValues=function(){var t;return{x:this._origin.x,y:this._origin.y,width:null!==(t=this._size.width)&&void 0!==t?t:0,height:null!==(t=this._size.height)&&void 0!==t?t:0,name:this._name,tooltip:this._tooltip,isDisabled:this._isDisabled,isVisible:this._isVisible}},t.prototype._loadWidget=function(){var t,e=this;this._interactor._update(this._name,function(t){e._widget=t}),null!==(t=this._didLoad)&&void 0!==t&&t.call(this,this)},t.prototype._appearWidget=function(){var t;null!==(t=this._didAppear)&&void 0!==t&&t.call(this,this)},t.prototype._resetSize=function(){void 0!==this._initialSize&&(this._size=this._initialSize)},t.prototype._refreshUI=function(){this._update(this._widget)},t.prototype._applyFont=function(t){return void 0!==this._font&&void 0!==t?new TextBuilder(t).font(this._font).build():t},t.prototype._setInteractor=function(t){this._interactor=t},t.prototype._getInteractor=function(){return this._interactor},t.prototype.updateUI=function(t){var e=this._size;null!=(t=void 0===t?void 0:t)&&t(this);t=this._size;e.width===t.width&&e.height===t.height?this._refreshUI():this._interactor.refreshWindow()},t.prototype.getOrigin=function(){return this._origin},t.prototype.minSize=function(t){var e,i=UISizeZero,i="number"==typeof t?{width:t,height:t}:{width:null!==(e=t.width)&&void 0!==e?e:this._minSize.width,height:null!==(t=t.height)&&void 0!==t?t:this._minSize.height};return this._minSize=i,this},t.prototype.getMinSize=function(){return this._minSize},t.prototype.size=function(t){var e,i=UIOptionalSizeDefault,i="number"==typeof t?{width:t,height:t}:{width:null!==(e=t.width)&&void 0!==e?e:this._size.width,height:null!==(t=t.height)&&void 0!==t?t:this._size.height};return this._size=i,this._initialSize=i,this},t.prototype.getSize=function(){var t,e=this._size;return{width:null!==(t=e.width)&&void 0!==t?t:0,height:null!==(e=e.height)&&void 0!==e?e:0}},t.prototype.occupiedSize=function(t){var e,i=UIOptionalSizeDefault,i="number"==typeof t?{width:t,height:t}:{width:null!==(e=t.width)&&void 0!==e?e:null===(e=this._occupiedSize)||void 0===e?void 0:e.width,height:null!==(t=t.height)&&void 0!==t?t:null===(t=this._occupiedSize)||void 0===t?void 0:t.height};return this._occupiedSize=i,this},t.prototype.getOccupiedSize=function(){var t;return{width:null!==(t=null!==(t=null===(t=this._occupiedSize)||void 0===t?void 0:t.width)&&void 0!==t?t:this._size.width)&&void 0!==t?t:0,height:null!==(t=null!==(t=null===(t=this._occupiedSize)||void 0===t?void 0:t.height)&&void 0!==t?t:this._size.height)&&void 0!==t?t:0}},t.prototype.name=function(t){return this._name=t,this},t.prototype.getName=function(){return this._name},t.prototype.tooltip=function(t){return this._tooltip=t,this},t.prototype.getTooltip=function(){return this._tooltip},t.prototype.isDisabled=function(t){return this._isDisabled=t,this},t.prototype.getIsDisabled=function(){return this._isDisabled},t.prototype.isVisible=function(t){return this._isVisible=t,this},t.prototype.getIsVisible=function(){return this._isVisible},t.prototype.offset=function(t){var e;return this._offset={x:null!==(e=t.x)&&void 0!==e?e:this._offset.x,y:null!==(t=t.y)&&void 0!==t?t:this._offset.y},this},t.prototype.getOffset=function(){return this._offset},t.prototype.extends=function(t){var e;return this._extends="number"==typeof t?{top:t,left:t,bottom:t,right:t}:{top:null!==(e=t.top)&&void 0!==e?e:this._extends.top,left:null!==(e=t.left)&&void 0!==e?e:this._extends.left,bottom:null!==(e=t.bottom)&&void 0!==e?e:this._extends.bottom,right:null!==(t=t.right)&&void 0!==t?t:this._extends.right},this},t.prototype.getExtends=function(){return this._extends},t.prototype.font=function(t){return this._font=t,this},t.prototype.getFont=function(){return this._font},t.prototype.bind=function(t){return t._bind(this),this},t.prototype.resetSize=function(){return this.size(this._minSize)},t.prototype.didLoad=function(t){return this._didLoad=t,this},t.prototype.didAppear=function(t){return this._didAppear=t,this},t.prototype.description=function(){return"name: "+this._name+"\norigin: { x: "+this._origin.x+", y: "+this._origin.y+" }\nsize: { width: "+this._size.width+", height: "+this._size.height+" }"},t}(),UITab=function(){function i(t,e){void 0===e&&(e=void 0),this._isExpandable=!1,this._isHidden=!1,this._name=this.constructor.name+"-"+uuid(),this._image=null!=e?e:UIImageNone,this._contentView=t}return i.$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new i(new UIStack(UIAxis.Vertical,t))},i.prototype._data=function(){return{image:this._image._data(!0),widgets:this._contentView._getWidgets()}},i.prototype._build=function(){var t=this._contentView._estimatedSize();this._contentView._layout(UIAxis.Vertical,UIPointZero,t),this._contentView._build()},i.prototype._getContentView=function(){return this._contentView},i.prototype._setMinSize=function(t){return this._minSize=t},i.prototype._getDidLoad=function(){return this._didLoad},i.prototype._getDidAppear=function(){return this._didAppear},i.prototype._setInteractor=function(t){this._interactor=t},i.prototype._getMinSize=function(){return this._minSize},i.prototype._getMaxSize=function(){return this._maxSize},i.prototype.updateUI=function(t){var e=this._image,i=this._isHidden;null!=(t=void 0===t?void 0:t)&&t.call(this,this);var n=this._image,t=this._isHidden,e=!n.isEqual(e);this._interactor.refreshWindowTab(e||t!=i)},i.prototype.name=function(t){return this._name=t,this},i.prototype.getName=function(){return this._name},i.prototype.spacing=function(t){return this._spacing=t,this},i.prototype.getSpacing=function(){return this._spacing},i.prototype.padding=function(t){var e,i,n,o,r;return this._padding="number"==typeof t?{top:t,left:t,bottom:t,right:t}:{top:null!==(i=null!==(e=t.top)&&void 0!==e?e:null===(i=this._padding)||void 0===i?void 0:i.top)&&void 0!==i?i:0,left:null!==(n=null!==(i=t.left)&&void 0!==i?i:null===(n=this._padding)||void 0===n?void 0:n.left)&&void 0!==n?n:0,bottom:null!==(o=null!==(n=t.bottom)&&void 0!==n?n:null===(o=this._padding)||void 0===o?void 0:o.bottom)&&void 0!==o?o:0,right:null!==(r=null!==(t=t.right)&&void 0!==t?t:null===(r=this._padding)||void 0===r?void 0:r.right)&&void 0!==r?r:0},this},i.prototype.getPadding=function(){return this._padding},i.prototype.isExpandable=function(t){return this._isExpandable=t,this},i.prototype.getIsExpandable=function(){return this._isExpandable},i.prototype.minSize=function(t){var e;return this._minSize={width:null!==(e=t.width)&&void 0!==e?e:null===(e=this._minSize)||void 0===e?void 0:e.width,height:null!==(t=t.height)&&void 0!==t?t:null===(t=this._minSize)||void 0===t?void 0:t.height},this._originalMinSize=__assign({},this._minSize),this},i.prototype.getMinSize=function(){return this._originalMinSize},i.prototype.maxSize=function(t){var e;return this._maxSize={width:null!==(e=t.width)&&void 0!==e?e:null===(e=this._maxSize)||void 0===e?void 0:e.width,height:null!==(t=t.height)&&void 0!==t?t:null===(t=this._maxSize)||void 0===t?void 0:t.height},this._originalMaxSize=__assign({},this._maxSize),this},i.prototype.getMaxSize=function(){return this._originalMaxSize},i.prototype.image=function(t){return this._image=t,this},i.prototype.getImage=function(){return this._image},i.prototype.title=function(t){return this._title=t,this},i.prototype.getTitle=function(){return this._title},i.prototype.theme=function(t){return this._theme=t,this},i.prototype.getTheme=function(){return this._theme},i.prototype.isHidden=function(t){return this._isHidden=t,this},i.prototype.getIsHidden=function(){return this._isHidden},i.prototype.bind=function(t){return t._bind(this),this},i.prototype.didLoad=function(t){return this._didLoad=t,this},i.prototype.didAppear=function(t){return this._didAppear=t,this},i.prototype.getUIWidget=function(e){return this._contentView._getUIWidgets().first(function(t){return t.getName()===e})},i}(),UIStack=function(o){function y(e,t,i){void 0===i&&(i=!1);var n=o.call(this)||this;return n._spacing=0,n._insets=UIEdgeInsetsZero,n._padding=UIEdgeInsetsZero,n._axis=e,n._childs=t,n._childs.forEach(function(t){t instanceof UISpacer&&t._confirm(e)}),(n._isGrouped=i)&&(n._insets={top:6,left:2,bottom:2,right:2}),n}return __extends(y,o),y.$=function(t,e){void 0===e&&(e=!1);for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return new y(t,i,e)},y.$V=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new y(UIAxis.Vertical,t,!1)},y.$H=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new y(UIAxis.Horizontal,t,!1)},y.$VG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new y(UIAxis.Vertical,t,!0)},y.$HG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new y(UIAxis.Horizontal,t,!0)},y.prototype._getUIWidgets=function(){var t=this._childs.map(function(t){return t._getUIWidgets()}).flatMap();return this._isGrouped&&t.unshift(this),t},y.prototype._getWidgets=function(){var t=this._childs.map(function(t){return t._getWidgets()}).flatMap();return this._isGrouped&&t.unshift(this._widget),t},y.prototype._containerSize=function(){var i=this;return this._childs.map(function(t){return t._estimatedSize()}).reduce(function(t,e){switch(i._axis){case UIAxis.Vertical:return{width:Math.max(t.width,e.width),height:t.height+e.height+i._spacing};case UIAxis.Horizontal:return{width:t.width+e.width+i._spacing,height:Math.max(t.height,e.height)}}})},y.prototype._isUnNamedGroup=function(){return this._isGrouped&&void 0===this._groupTitle},y.prototype._isNamedGroup=function(){return this._isGrouped&&void 0!==this._groupTitle},y.prototype._estimatedSize=function(){var t=this._containerSize();this._isNamedGroup()&&(e=(null!==(e=null===(e=this._groupTitle)||void 0===e?void 0:e.size().width)&&void 0!==e?e:0)+8,t={width:Math.max(t.width,e),height:t.height+1});var e=this._isUnNamedGroup()?4:0;return{width:t.width+this._insets.left+this._insets.right+this._padding.left+this._padding.right,height:t.height+this._insets.top+this._insets.bottom+this._padding.top+this._padding.bottom-e}},y.prototype._isUndefinedSize=function(e){return 0<this._childs.filter(function(t){return t._isUndefinedSize(e)}).length},y.prototype._layout=function(t,e,i){var n=this;void 0===this._initialSize&&(this._initialSize=this._size);var o=r=this._estimatedSize(),r={width:Math.max(r.width,i.width),height:Math.max(r.height,i.height)},a=this._isUnNamedGroup(),i=a?4:0;a?(this._origin={x:e.x,y:e.y-i},this._size={width:r.width,height:r.height+i}):(this._origin=e,this._size=r);var s=this._childs.filter(function(t){return t._isUndefinedSize(n._axis)}).length,e=0==this._childs.filter(function(t){return t instanceof y}).length?1:0,h={width:r.width-(this._insets.left+this._insets.right+this._padding.left+this._padding.right),height:r.height-(this._insets.top+this._insets.bottom+this._padding.top+this._padding.bottom)+i-e},I={x:this._origin.x+this._insets.left+this._padding.left+this._offset.x,y:this._origin.y+this._insets.top+this._padding.top+this._offset.y},u=I;switch(this._axis){case UIAxis.Vertical:for(var g=Math.floor((r.height-o.height)/s),l=0,d=this._childs;l<d.length;l++){var p=(U=d[l])._isUndefinedSize(this._axis),c=U._estimatedSize().height;u={x:(u=U._layout(this._axis,{x:I.x,y:u.y},{width:h.width,height:c+(p?g:0)})).x,y:u.y+this._spacing}}break;case UIAxis.Horizontal:for(var g=Math.floor((r.width-o.width)/s),m=0,_=this._childs;m<_.length;m++){var U,f=(U=_[m])._isUndefinedSize(this._axis),v=U._estimatedSize().width;u={x:(u=U._layout(this._axis,{x:u.x,y:I.y},{width:v+(f?g:0),height:h.height})).x+this._spacing,y:u.y}}}return{x:this._origin.x+this._size.width,y:this._origin.y+this._size.height}},y.prototype._loadWidget=function(){this._isGrouped&&o.prototype._loadWidget.call(this),this._childs.forEach(function(t){return t._loadWidget()})},y.prototype._build=function(){var t;this._isGrouped&&(this._widget=__assign(__assign({},this._buildBaseValues()),{text:null!==(t=this._groupTitle)&&void 0!==t?t:"",type:"groupbox"})),this._childs.forEach(function(t){return t._build()})},y.prototype._update=function(t){this._isGrouped&&t&&(o.prototype._update.call(this,t),t.name=null!==(t=this._groupTitle)&&void 0!==t?t:"")},y.prototype._resetSize=function(){o.prototype._resetSize.call(this),this._childs.forEach(function(t){return t._resetSize()})},y.prototype._refreshUI=function(){this._isGrouped&&o.prototype._refreshUI.call(this),this._childs.forEach(function(t){return t._refreshUI()})},y.prototype.getAxis=function(){return this._axis},y.prototype.spacing=function(t){return this._spacing=t,this},y.prototype.getSpacing=function(){return this._spacing},y.prototype.padding=function(t){var e;return this._padding="number"==typeof t?{top:t,left:t,bottom:t,right:t}:{top:null!==(e=t.top)&&void 0!==e?e:this._padding.top,left:null!==(e=t.left)&&void 0!==e?e:this._padding.left,bottom:null!==(e=t.bottom)&&void 0!==e?e:this._padding.bottom,right:null!==(t=t.right)&&void 0!==t?t:this._padding.right},this},y.prototype.getPadding=function(){return this._padding},y.prototype.getIsGrouped=function(){return this._isGrouped},y.prototype.title=function(t){return"string"==typeof t&&this._isGrouped?this._insets={top:16,left:2,bottom:2,right:2}:this._insets=UIEdgeInsetsZero,this._groupTitle=t,this},y.prototype.getGroupBoxTitle=function(){return this._groupTitle},y.prototype.getChilds=function(){return this._childs},y}(UIWidget),UIConstructor=function(){function t(){}return t.prototype.constructTabs=function(t,e,i,n,o,r,a,s,h){var I;if(void 0===s&&(s=!0),void 0===h&&(h=!1),e>=t.length||e<0)throw new Error("SelectedIndex is less than the count of tabs and must be at least 0.");for(var u=31*t.length+6,g=h?e:0;h?g==e:g<t.length;g++){var l=t[g],d=l._getContentView().spacing(null!==(p=l.getSpacing())&&void 0!==p?p:n).padding(null!==(c=l.getPadding())&&void 0!==c?c:o);l._setInteractor(i);var p=this.construct(d,i,UIEdgeInsetsTabContainer,r,s),c=l.getMinSize(),d=null!==(d=null==c?void 0:c.width)&&void 0!==d?d:0,c=null!==(c=null==c?void 0:c.height)&&void 0!==c?c:0,p=l._setMinSize({width:Math.max(p.size.width,d,u),height:Math.max(p.size.height,c)}),c=l.getMaxSize(),l=null!==(l=null==c?void 0:c.width)&&void 0!==l?l:a.width,c=null!==(c=null==c?void 0:c.height)&&void 0!==c?c:a.height;(l<p.width||c<p.height)&&console.log("WARNING: UITab["+g+"] maximum size is less than its minimum size!\nminSize: { width: "+p.width+", height: "+p.height+" }\nmaxSize: { width: "+l+", height: "+c+" }\nErrors can occur when resizing windows.")}var m=t[e].getMinSize();return{size:{width:null!==(I=null==m?void 0:m.width)&&void 0!==I?I:r.width,height:null!==(m=null==m?void 0:m.height)&&void 0!==m?m:r.height},widgets:[],tabs:t.map(function(t){return t._data()})}},t.prototype.construct=function(t,e,i,n,o){void 0===i&&(i=UIEdgeInsetsContainer),void 0===o&&(o=!0),this._injectInteractor(t,e);o=this.calculateBounds(t,i,o);return{size:{width:Math.max(o.width,n.width),height:Math.max(o.height,n.height)},widgets:t._getWidgets()}},t.prototype._injectInteractor=function(t,e){var i=t._getUIWidgets();t._setInteractor(e),i.forEach(function(t){return t._setInteractor(e)})},t.prototype.calculateBounds=function(t,e,i){void 0===i&&(i=!0);var n={x:e.left,y:e.top},o=t._estimatedSize();return t._layout(UIAxis.Vertical,n,o),i&&t._build(),{width:o.width+e.left+e.right,height:o.height+e.top+e.bottom}},t.prototype.didLoadTabs=function(t){t.map(function(t){return t._getContentView()._getUIWidgets()}).flatMap().forEach(function(t){return t._loadWidget()}),t.forEach(function(t){var e;return null===(e=t._getDidLoad())||void 0===e?void 0:e.call(t,t)})},t.prototype.didLoad=function(t){t._getUIWidgets().forEach(function(t){return t._loadWidget()})},t.prototype.didAppearTab=function(t){var e;this.didLoad(t._getContentView()),null!==(e=t._getDidAppear())&&void 0!==e&&e.call(t,t)},t.prototype.didAppear=function(t){t._getUIWidgets().forEach(function(t){return t._appearWidget()})},t.prototype.refreshTab=function(t,e){this.refresh(t._getContentView(),e,UIEdgeInsetsTabContainer)},t.prototype.refresh=function(t,e,i){var n={x:(i=void 0===i?UIEdgeInsetsContainer:i).left,y:i.top},i={width:e.width-(i.left+i.right),height:e.height-(i.top+i.bottom)};t._resetSize(),t._layout(UIAxis.Vertical,n,i),t._refreshUI()},t}(),UITabProxy=function(){function t(){}return t.$=function(){return new t},t.prototype._bind=function(t){this.ui=t},t.prototype.updateUI=function(t){var e;void 0===t&&(t=void 0),null!==(e=this.ui)&&void 0!==e&&e.updateUI(t)},t.prototype.didLoad=function(t){var e;null!==(e=this.ui)&&void 0!==e&&e.didLoad(t)},t.prototype.didAppear=function(t){var e;null!==(e=this.ui)&&void 0!==e&&e.didAppear(t)},t}(),UITP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(UITabProxy),UIWidgetProxy=function(){function t(){}return t.$=function(){return new t},t.prototype._bind=function(t){this.ui=t},t.prototype.updateUI=function(t){var e;void 0===t&&(t=void 0),null!==(e=this.ui)&&void 0!==e&&e.updateUI(t)},t.prototype.didLoad=function(t){var e;null!==(e=this.ui)&&void 0!==e&&e.didLoad(t)},t.prototype.didAppear=function(t){var e;null!==(e=this.ui)&&void 0!==e&&e.didAppear(t)},t.prototype.onClick=function(t){var e=this.ui;if(e){if(!e.onClick)throw new Error("There is no 'onClick' function in widget '"+e.getName()+"'!");e.onClick(t)}},t.prototype.onChange=function(t){var e=this.ui;if(e){if(!e.onChange)throw new Error("There is no 'onChange' function in widget '"+e.getName()+"'!");e.onChange(t)}},t}(),UIWP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(UIWidgetProxy);!function(t){t[t.Black=0]="Black",t[t.Gray=1]="Gray",t[t.White=2]="White",t[t.DarkPurple=3]="DarkPurple",t[t.LightPurple=4]="LightPurple",t[t.BrightPurple=5]="BrightPurple",t[t.DarkBlue=6]="DarkBlue",t[t.LightBlue=7]="LightBlue",t[t.IcyBlue=8]="IcyBlue",t[t.DarkWater=9]="DarkWater",t[t.LightWater=10]="LightWater",t[t.SaturatedGreen=11]="SaturatedGreen",t[t.DarkGreen=12]="DarkGreen",t[t.MossGreen=13]="MossGreen",t[t.BrightGreen=14]="BrightGreen",t[t.OliveGreen=15]="OliveGreen",t[t.DarkOliveGreen=16]="DarkOliveGreen",t[t.BrightYellow=17]="BrightYellow",t[t.Yellow=18]="Yellow",t[t.DarkYellow=19]="DarkYellow",t[t.LightOrange=20]="LightOrange",t[t.DarkOrange=21]="DarkOrange",t[t.LightBrown=22]="LightBrown",t[t.SaturatedBrown=23]="SaturatedBrown",t[t.DarkBrown=24]="DarkBrown",t[t.SalmonPink=25]="SalmonPink",t[t.BordeauxRed=26]="BordeauxRed",t[t.SaturatedRed=27]="SaturatedRed",t[t.BrightRed=28]="BrightRed",t[t.DarkPink=29]="DarkPink",t[t.BrightPink=30]="BrightPink",t[t.LightPink=31]="LightPink"}(UIColor=UIColor||{}),function(t){t[t.Outline=32]="Outline",t[t.Inset=64]="Inset",t[t.Translucent=128]="Translucent",t[t.Unknown=256]="Unknown"}(UIColorFlag=UIColorFlag||{});var UIScrollbarType,UISortOrder,UITextAlignment,UIWindowThemeDefault={primary:UIColor.Gray,secondary:UIColor.Gray,tertiary:UIColor.Gray},UIWindow=function(){function n(t,e){if(this._id=this.constructor.name+"-"+uuid(),this._uiConstructor=new UIConstructor,this._interactor=new UIInteractor,this._selectedTabIndex=0,this._defaultTheme=UIWindowThemeDefault,this._theme=UIWindowThemeDefault,this._spacing=0,this._padding=UIEdgeInsetsZero,this._initialExpandableState=!1,this._isExpandable=!1,this._originalMinSize=UISizeZero,this._minSize=UISizeZero,this._originalMaxSize={width:ui.width,height:ui.height},this._maxSize={width:ui.width,height:ui.height},this._internalClose=!1,this._title=t,this._originalTitle=t,!(0<e.length))throw new Error("Need to add at least one UITab or UIWidget.");e[0]instanceof UIWidget?this._singleContentView=new UIStack(UIAxis.Vertical,e):this._tabs=e}return n.$=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return new n(t,e)},n.$T=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return new n(t,e)},n.prototype._usingTab=function(){return void 0!==this._tabs},n.prototype._getVisibleTabs=function(){var t;return null===(t=this._tabs)||void 0===t?void 0:t.filter(function(t){return!t.getIsHidden()})},n.prototype._getSelectedTabIndex=function(){var t=null!==(t=null===(t=this._getVisibleTabs())||void 0===t?void 0:t.length)&&void 0!==t?t:0;return Math.min(Math.max(t-1,0),this._selectedTabIndex)},n.prototype._getSelectedTab=function(){var t;return null===(t=this._getVisibleTabs())||void 0===t?void 0:t[this._getSelectedTabIndex()]},n.prototype._getTab=function(t){var e=null!==(e=null===(e=this._getVisibleTabs())||void 0===e?void 0:e.length)&&void 0!==e?e:0;if(0<=t&&t<e)return null===(e=this._getVisibleTabs())||void 0===e?void 0:e[t]},n.prototype._convertColors=function(t){if(void 0===(t=void 0===t?void 0:t))return[null!==(e=this._theme.primary)&&void 0!==e?e:this._defaultTheme.primary,null!==(e=this._theme.secondary)&&void 0!==e?e:this._defaultTheme.secondary,null!==(e=this._theme.tertiary)&&void 0!==e?e:this._defaultTheme.tertiary];var e=this._getTab(t),t=null==e?void 0:e.getTheme();return[null!==(e=null!==(e=null==t?void 0:t.primary)&&void 0!==e?e:this._theme.primary)&&void 0!==e?e:this._defaultTheme.primary,null!==(e=null!==(e=null==t?void 0:t.secondary)&&void 0!==e?e:this._theme.secondary)&&void 0!==e?e:this._defaultTheme.secondary,null!==(t=null!==(t=null==t?void 0:t.tertiary)&&void 0!==t?t:this._theme.tertiary)&&void 0!==t?t:this._defaultTheme.tertiary]},n.prototype._isOpened=function(){return void 0!==this._window},n.prototype._sync=function(){var t;this._isOpened()&&(t=this._window,this._origin={x:t.x,y:t.y},this._size={width:t.width,height:t.height})},n.prototype._update=function(){var t,i=this,e=this._window;void 0!==e&&(e.title=this._title,e.minWidth=(t=function(t,e){return t?i._isExpandable?e.width:Math.max(i._minSize.width,i._size.width):i._isExpandable?e.height:Math.max(i._minSize.height,i._size.height)})(!0,this._minSize),e.minHeight=t(!1,this._minSize),e.maxWidth=t(!0,this._maxSize),e.maxHeight=t(!1,this._maxSize),t=this._usingTab()?this._getSelectedTabIndex():void 0,e.colours=this._convertColors(t),e.x=ui.width+1,e.y=ui.height+1,e.x=this._origin.x,e.y=this._origin.y)},n.prototype._onUpdate=function(){var t,e=this._window;void 0!==e&&(t=e.x!=this._origin.x||e.y!=this._origin.y,e=e.width!=this._size.width||e.height!=this._size.height,(t||e)&&this._sync(),e&&this._refresh(this._size))},n.prototype._internalOnTabChange=function(){var t,e,i,n,o,r,a,s,h=this._getVisibleTabs();void 0!==h&&(t=this._originalMinSize,e=this._originalMaxSize,i=this._getSelectedTabIndex(),void 0!==(n=this._getTab(i))&&(n._getContentView()._resetSize(),this._uiConstructor.constructTabs(h,i,this._interactor,this._spacing,this._padding,t,e,!1,!0),h=n._getMinSize(),o={width:null!==(i=null==h?void 0:h.width)&&void 0!==i?i:t.width,height:null!==(h=null==h?void 0:h.height)&&void 0!==h?h:t.height},h=n._getMaxSize(),r={width:null!==(t=null==h?void 0:h.width)&&void 0!==t?t:e.width,height:null!==(h=null==h?void 0:h.height)&&void 0!==h?h:e.height},h={width:Math.max(Math.min(this._size.width,r.width),o.width),height:Math.max(Math.min(this._size.height,r.height),o.height)},a=null!==(e=n.getTitle())&&void 0!==e?e:this._originalTitle,s=this._initialExpandableState||n.getIsExpandable(),this._uiConstructor.didAppearTab(n),this._refresh(h),this.updateUI(function(t){t._minSize=o,t._maxSize=r,t._isExpandable=s,t._title=a})))},n.prototype._refresh=function(t){var e;this._usingTab()?void 0!==(e=this._getSelectedTab())&&this._uiConstructor.refreshTab(e,t):this._uiConstructor.refresh(this._singleContentView,t)},n.prototype._reflectResizingFromChild=function(){this._singleContentView;var t,e,i=this._originalMinSize,n=this._originalMaxSize,o=this._initialExpandableState,r=this._title,a=this._getVisibleTabs();void 0!==a?(t=this._getSelectedTabIndex(),void 0!==(e=this._getTab(t))&&(e._getContentView()._resetSize(),this._uiConstructor.constructTabs(a,t,this._interactor,this._spacing,this._padding,i,n,!1),a=e._getMinSize(),i={width:null!==(t=null==a?void 0:a.width)&&void 0!==t?t:i.width,height:null!==(t=null==a?void 0:a.height)&&void 0!==t?t:i.height},a=e._getMaxSize(),n={width:null!==(t=null==a?void 0:a.width)&&void 0!==t?t:n.width,height:null!==(a=null==a?void 0:a.height)&&void 0!==a?a:n.height},r=null!==(a=e.getTitle())&&void 0!==a?a:this._originalTitle,o=o||e.getIsExpandable())):void 0!==this._singleContentView&&(this._singleContentView._resetSize(),s=this._uiConstructor.construct(this._singleContentView,this._interactor,UIEdgeInsetsContainer,i,!1),i=s.size);var s={width:Math.max(Math.min(this._size.width,n.width),i.width),height:Math.max(Math.min(this._size.height,n.height),i.height)};this._refresh(s),this.updateUI(function(t){t._minSize=i,t._maxSize=n,t._isExpandable=o,t._title=r})},n.prototype._activeInterval=function(e){var t=null===(t=this._singleContentView)||void 0===t?void 0:t._getUIWidgets();null!=t&&t.forEach(function(t){return intervalHelper.enabled(t.getName(),e)});t=null===(t=this._tabs)||void 0===t?void 0:t.map(function(t){return t._getContentView()._getUIWidgets()}).flatMap();null!=t&&t.forEach(function(t){return intervalHelper.enabled(t.getName(),e)})},n.prototype.show=function(){var t,e,i=this;if(this._isOpened())return this.bringToFront(),this;var n,o=null===(s=this._singleContentView)||void 0===s?void 0:s.spacing(this._spacing).padding(this._padding);void 0!==o&&(n=(r=this._uiConstructor.construct(o,this._interactor,UIEdgeInsetsContainer,this._originalMinSize)).widgets,this._minSize=r.size,t=this._originalTitle,e=this._convertColors());var r,a,s,h=this._getVisibleTabs(),I=this._getSelectedTabIndex();void 0!==h&&(g=this._getTab(I),l=(r=this._uiConstructor.constructTabs(h,I,this._interactor,this._spacing,this._padding,this._originalMinSize,this._originalMaxSize)).tabs,this._minSize=r.size,void 0!==g&&(a=this._originalMaxSize,s=g._getMaxSize(),this._maxSize={width:null!==(r=null==s?void 0:s.width)&&void 0!==r?r:a.width,height:null!==(s=null==s?void 0:s.height)&&void 0!==s?s:a.height},this._isExpandable||(this._isExpandable=null!==(u=g.getIsExpandable())&&void 0!==u&&u),t=null!==(u=g.getTitle())&&void 0!==u?u:this._originalTitle,e=this._convertColors(I))),this._selectedTabIndex=I;var u={width:Math.max(Math.min(null!==(I=null===(u=this._size)||void 0===u?void 0:u.width)&&void 0!==I?I:0,this._maxSize.width),this._minSize.width),height:Math.max(Math.min(null!==(I=null===(u=this._size)||void 0===u?void 0:u.height)&&void 0!==I?I:0,this._maxSize.height),this._minSize.height)};this._activeInterval(!0);var g,l={classification:this._title,x:null===(I=this._origin)||void 0===I?void 0:I.x,y:null===(I=this._origin)||void 0===I?void 0:I.y,width:u.width,height:u.height,title:t,minWidth:this._isExpandable?this._minSize.width:void 0,maxWidth:this._isExpandable?this._maxSize.width:void 0,minHeight:this._isExpandable?this._minSize.height:void 0,maxHeight:this._isExpandable?this._maxSize.height:void 0,widgets:n,colours:e,tabs:l,tabIndex:this._selectedTabIndex,onClose:function(){var t;i._internalClose||null!==(t=i._onClose)&&void 0!==t&&t.call(i,i),i._internalClose=!1,i._activeInterval(!1),i._window=void 0},onUpdate:function(){i._onUpdate()},onTabChange:function(){var t=null!==(t=null===(t=i._window)||void 0===t?void 0:t.tabIndex)&&void 0!==t?t:0;i._selectedTabIndex=t,i._internalOnTabChange(),null!==(t=i._onTabChange)&&void 0!==t&&t.call(i,i,i._selectedTabIndex)}};return this._window=ui.openWindow(l),this._initialSize={width:this._window.width,height:this._window.height},this._sync(),this._interactor._findWidget(function(t){return i.findWidget(t)}),this._interactor._refresh(function(){i._reflectResizingFromChild()}),this._interactor._refreshTab(function(t){t?i.reopen(!0):i._internalOnTabChange()}),this._interactor._windowTheme(function(){return i._theme}),void 0!==o&&this._uiConstructor.didLoad(o),void 0!==this._tabs&&this._uiConstructor.didLoadTabs(this._tabs),this._reflectResizingFromChild(),null!==(l=this._didLoad)&&void 0!==l&&l.call(this,this),void 0!==o&&this._uiConstructor.didAppear(o),void 0!==h&&void 0!==(g=this._getSelectedTab())&&this._uiConstructor.didAppearTab(g),null!==(g=this._didAppear)&&void 0!==g&&g.call(this,this),this},n.prototype.updateUI=function(t){var e=this._selectedTabIndex;null!=(t=void 0===t?void 0:t)&&t.call(this,this),this._update(),this._selectedTabIndex!=e&&this.reopen(!0)},n.prototype.close=function(){var t;null!==(t=this._window)&&void 0!==t&&t.close()},n.prototype.bringToFront=function(){var t;null!==(t=this._window)&&void 0!==t&&t.bringToFront()},n.prototype.reopen=function(t){this._internalClose=t=void 0===t?!1:t,this.close(),this.show()},n.prototype.findWidget=function(t){var e;return null===(e=this._window)||void 0===e?void 0:e.findWidget(t)},n.prototype.spacing=function(t){return this._spacing=t,this},n.prototype.getSpacing=function(){return this._spacing},n.prototype.padding=function(t){var e;return this._padding="number"==typeof t?{top:t,left:t,bottom:t,right:t}:{top:null!==(e=t.top)&&void 0!==e?e:this._padding.top,left:null!==(e=t.left)&&void 0!==e?e:this._padding.left,bottom:null!==(e=t.bottom)&&void 0!==e?e:this._padding.bottom,right:null!==(t=t.right)&&void 0!==t?t:this._padding.right},this},n.prototype.getPadding=function(){return this._padding},n.prototype.origin=function(t){var e;return this._origin={x:null!==(e=t.x)&&void 0!==e?e:this._origin.x,y:null!==(t=t.y)&&void 0!==t?t:this._origin.y},this},n.prototype.getOrigin=function(){return this._origin},n.prototype.getSize=function(){return this._size},n.prototype.minSize=function(t){var e;return this._minSize={width:null!==(e=t.width)&&void 0!==e?e:this._minSize.width,height:null!==(t=t.height)&&void 0!==t?t:this._minSize.height},this._originalMinSize=__assign({},this._minSize),this},n.prototype.getMinSize=function(){return this._originalMinSize},n.prototype.maxSize=function(t){var e;return this._maxSize={width:null!==(e=t.width)&&void 0!==e?e:this._maxSize.width,height:null!==(t=t.height)&&void 0!==t?t:this._maxSize.height},this._originalMaxSize=__assign({},this._maxSize),this},n.prototype.getMaxSize=function(){return this._originalMaxSize},n.prototype.isExpandable=function(t){return this._isExpandable=t,this._initialExpandableState=t,this},n.prototype.getIsExpandable=function(){return this._isExpandable},n.prototype.title=function(t){return this._title=t,this},n.prototype.getTitle=function(){return this._title},n.prototype.selectedTabIndex=function(t){return this._usingTab()?0<=t&&t<this._tabs.length?this._selectedTabIndex=t:console.log("WARNING: Enter a value within a valid range. (0 ~ "+(this._tabs.length-1)+")"):console.log("WARNING: This property is only available if the window is created with a tab type."),this},n.prototype.getSelectedTabIndex=function(){return this._selectedTabIndex},n.prototype.theme=function(t){return this._theme=t,this},n.prototype.getTheme=function(){return this._theme},n.prototype.onClose=function(t){return this._onClose=t,this},n.prototype.onTabChange=function(t){return this._onTabChange=t,this},n.prototype.bind=function(t){return t._bind(this),this},n.prototype.didLoad=function(t){return this._didLoad=t,this},n.prototype.didAppear=function(t){return this._didAppear=t,this},n.prototype.getUITab=function(e){var t;return null===(t=this._tabs)||void 0===t?void 0:t.first(function(t){return t.getName()===e})},n.prototype.getUIWidget=function(e){var t,i=null===(t=this._singleContentView)||void 0===t?void 0:t._getUIWidgets().first(function(t){return t.getName()===e}),n=this._getVisibleTabs();if(void 0===i&&void 0!==n)for(var o=0;o<n.length&&void 0===(i=n[o].getUIWidget(e));o++);return i},n}(),UIWindowProxy=function(){function t(){}return t.$=function(){return new t},t.prototype._bind=function(t){this.ui=t},t.prototype.show=function(){var t;null!==(t=this.ui)&&void 0!==t&&t.show()},t.prototype.updateUI=function(t){var e;void 0===t&&(t=void 0),null!==(e=this.ui)&&void 0!==e&&e.updateUI(t)},t.prototype.didLoad=function(t){var e;null!==(e=this.ui)&&void 0!==e&&e.didLoad(t)},t.prototype.didAppear=function(t){var e;null!==(e=this.ui)&&void 0!==e&&e.didAppear(t)},t.prototype.onTabChange=function(t){var e;null!==(e=this.ui)&&void 0!==e&&e.onTabChange(t)},t.prototype.onClose=function(t){var e;null!==(e=this.ui)&&void 0!==e&&e.onClose(t)},t.prototype.close=function(){var t;null!==(t=this.ui)&&void 0!==t&&t.close()},t}(),UIWDP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(UIWindowProxy);!function(t){t.None="none",t.Vertical="vertical",t.Horizontal="horizontal",t.both="both"}(UIScrollbarType=UIScrollbarType||{}),function(t){t.None="none",t.Ascending="ascending",t.Descending="descending"}(UISortOrder=UISortOrder||{}),function(t){t.Left="left",t.Center="centred"}(UITextAlignment=UITextAlignment||{});var UIViewportFlag,UIViewportScale,UIViewportAngle,UIImageNone=UIImage.$(-1),UIImageShopItemBalloon=UIImage.$(5061),UIImageShopItemToy=UIImage.$(5062),UIImageShopItemMap=UIImage.$(5063),UIImageShopItemPhoto=UIImage.$(5064),UIImageShopItemUmbrella=UIImage.$(5065),UIImageShopItemDrink=UIImage.$(5066),UIImageShopItemBurger=UIImage.$(5067),UIImageShopItemChips=UIImage.$(5068),UIImageShopItemIceCream=UIImage.$(5069),UIImageShopItemCandyfloss=UIImage.$(5070),UIImageShopItemEmptyCan=UIImage.$(5071),UIImageShopItemRubbish=UIImage.$(5072),UIImageShopItemEmptyBurgerBox=UIImage.$(5073),UIImageShopItemPizza=UIImage.$(5074),UIImageShopItemVoucher=UIImage.$(5075),UIImageShopItemPopcorn=UIImage.$(5076),UIImageShopItemHotDog=UIImage.$(5077),UIImageShopItemTentacle=UIImage.$(5078),UIImageShopItemHat=UIImage.$(5079),UIImageShopItemToffeeApple=UIImage.$(5080),UIImageShopItemTshirt=UIImage.$(5081),UIImageShopItemDoughnut=UIImage.$(5082),UIImageShopItemCoffee=UIImage.$(5083),UIImageShopItemEmptyCup=UIImage.$(5084),UIImageShopItemChicken=UIImage.$(5085),UIImageShopItemLemonade=UIImage.$(5086),UIImageShopItemEmptyBox=UIImage.$(5087),UIImageShopItemEmptyBottle=UIImage.$(5088),UIImageShopItemPhoto2=UIImage.$(5089),UIImageShopItemPhoto3=UIImage.$(5090),UIImageShopItemPhoto4=UIImage.$(5091),UIImageShopItemPretzel=UIImage.$(5092),UIImageShopItemChocolate=UIImage.$(5093),UIImageShopItemIcedTea=UIImage.$(5094),UIImageShopItemFunnelCake=UIImage.$(5095),UIImageShopItemSunglasses=UIImage.$(5096),UIImageShopItemBeefNoodles=UIImage.$(5097),UIImageShopItemFriedRiceNoodles=UIImage.$(5098),UIImageShopItemWontonSoup=UIImage.$(5099),UIImageShopItemMeatballSoup=UIImage.$(5100),UIImageShopItemFruitJuice=UIImage.$(5101),UIImageShopItemSoybeanMilk=UIImage.$(5102),UIImageShopItemSujeonggwa=UIImage.$(5103),UIImageShopItemSubSandwich=UIImage.$(5104),UIImageShopItemCookie=UIImage.$(5105),UIImageShopItemEmptyBowlRed=UIImage.$(5106),UIImageShopItemEmptyDrinkCarton=UIImage.$(5107),UIImageShopItemEmptyJuiceCup=UIImage.$(5108),UIImageShopItemRoastSausage=UIImage.$(5109),UIImageShopItemEmptyBowlBlue=UIImage.$(5110),UIImageStaffOrdersSweeping=UIImage.$(5111),UIImageStaffOrdersWaterFlowers=UIImage.$(5112),UIImageStaffOrdersEmptyBins=UIImage.$(5113),UIImageStaffOrdersMowing=UIImage.$(5114),UIImageStaffOrdersInspectRides=UIImage.$(5115),UIImageStaffOrdersFixRides=UIImage.$(5116),UIImageStaffPatrolPath=UIImage.$(5117),UIImageStaffCostumePanda=UIImage.$(5118),UIImageStaffCostumeTiger=UIImage.$(5119),UIImageStaffCostumeElephant=UIImage.$(5120),UIImageStaffCostumeRoman=UIImage.$(5121),UIImageStaffCostumeGorilla=UIImage.$(5122),UIImageStaffCostumeSnowman=UIImage.$(5123),UIImageStaffCostumeKnight=UIImage.$(5124),UIImageStaffCostumeAstronaut=UIImage.$(5125),UIImageStaffCostumeBandit=UIImage.$(5126),UIImageStaffCostumeSheriff=UIImage.$(5127),UIImageStaffCostumePirate=UIImage.$(5128),UIImageTabStaffHandymen=UIImage.$(11262).offset({x:16,y:20}),UIImageTabStaffMechanics=UIImage.$(11442).offset({x:16,y:20}),UIImageTabStaffSecurityGuards=UIImage.$(11882).offset({x:16,y:20}),UIImageTabStaffEntertainers=UIImage.$(12326).offset({x:16,y:25}),UIImageInformationSmall=UIImage.$(5129),UIImageRatingIncrease=UIImage.$(5130),UIImageRatingDecrease=UIImage.$(5131),UIImageRideConstructionStraight=UIImage.$(5137),UIImageRideConstructionLeftCurve=UIImage.$(5138),UIImageRideConstructionRightCurve=UIImage.$(5139),UIImageRideConstructionLeftCurveSmall=UIImage.$(5140),UIImageRideConstructionRightCurveSmall=UIImage.$(5141),UIImageRideConstructionLeftCurveLarge=UIImage.$(5142),UIImageRideConstructionRightCurveLarge=UIImage.$(5143),UIImageRideConstructionSlopeDownSteep=UIImage.$(5144),UIImageRideConstructionSlopeDown=UIImage.$(5145),UIImageRideConstructionSlopeLevel=UIImage.$(5146),UIImageRideConstructionSlopeUp=UIImage.$(5147),UIImageRideConstructionSlopeUpSteep=UIImage.$(5148),UIImageRideConstructionVerticalRise=UIImage.$(5149),UIImageRideConstructionVerticalDrop=UIImage.$(5150),UIImageRideConstructionHelixDown=UIImage.$(5151),UIImageRideConstructionHelixUp=UIImage.$(5152),UIImageRideConstructionLeftBank=UIImage.$(5153),UIImageRideConstructionNoBank=UIImage.$(5154),UIImageRideConstructionRightBank=UIImage.$(5155),UIImageRideConstructionUShapedTrack=UIImage.$(5156),UIImageRideConstructionOShapedTrack=UIImage.$(5157),UIImageRideConstructionRCTrack=UIImage.$(5158),UIImageRideConstructionWaterChannel=UIImage.$(5159),UIImagePrevious=UIImage.$(5160),UIImageNext=UIImage.$(5161),UIImageDemolishCurrentSection=UIImage.$(5162),UIImageChainLift=UIImage.$(5163),UIImageConstruction=UIImage.$(5164),UIImageDemolish=UIImage.$(5165),UIImageHearingViewport=UIImage.$(5166),UIImageLocate=UIImage.$(5167),UIImageRename=UIImage.$(5168),UIImageRotateArrow=UIImage.$(5169),UIImageMirrorArrow=UIImage.$(5170),UIImageScenery=UIImage.$(5171),UIImageSceneryCluster=UIImage.$(5172),UIImagePaintbrush=UIImage.$(5173),UIImagePickup=UIImage.$(5174),UIImagePatrol=UIImage.$(5175),UIImageBuyLandRights=UIImage.$(5176),UIImageBuyConstructionRights=UIImage.$(5177),UIImageNoEntry=UIImage.$(5178),UIImageClosed=UIImage.$(5179),UIImageOpen=UIImage.$(5180),UIImageTesting=UIImage.$(5181),UIImageToggleOpenClose=UIImage.$(5182),UIImageFloppy=UIImage.$(5183),UIImageShowGuestsThoughtsAboutThisRideAttraction=UIImage.$(5184),UIImageShowGuestsQueuingForThisRideAttraction=UIImage.$(5185),UIImageShowGuestsOnThisRideAttraction=UIImage.$(5186),UIImageRide=UIImage.$(5187),UIImageTrackPeep=UIImage.$(5188),UIImageNewRide=UIImage.$(5189),UIImageFinance=UIImage.$(5190),UIImageNewScenery=UIImage.$(5191),UIImageMap=UIImage.$(5192),UIImageGuests=UIImage.$(5193),UIImageAward=UIImage.$(5194),UIImageGraph=UIImage.$(5195),UIImageMechanic=UIImage.$(5196),UIImageParkEntrance=UIImage.$(5197),UIImageTabParkEntrance=UIImage.$(5200),UIImageTabGears=UIImage.$A(5201,4,2),UIImageTabWrench=UIImage.$A(5205,16,2),UIImageTabPaint=UIImage.$A(5221,8,4),UIImageTabTimer=UIImage.$A(5229,8,8),UIImageTabGraphA=UIImage.$A(5237,8,4),UIImageTabGraph=UIImage.$A(5245,8,4),UIImageTabAdmission=UIImage.$A(5253,8,2),UIImageTabFinancesSummary=UIImage.$A(5261,8,2),UIImageTabThoughts=UIImage.$A(5269,8,2),UIImageTabStats=UIImage.$A(5277,7,4),UIImageTabStaffOptions=UIImage.$A(5318,7,2),UIImageTabStaffOptionsOne=UIImage.$(5325),UIImageTabGuestInventory=UIImage.$(5326),UIImageTabFinancesResearch=UIImage.$A(5327,8,2),UIImageTabMusic=UIImage.$A(5335,16,2),UIImageTabShopsAndStalls=UIImage.$A(5351,16,4),UIImageTabKiosksAndFacilities=UIImage.$A(5367,8,4),UIImageTabFinancesFinancialGraph=UIImage.$A(5375,16,2),UIImageTabFinancesProfitGraph=UIImage.$A(5391,16,2),UIImageTabFinancesValueGraph=UIImage.$A(5407,16,2),UIImageTabFinancesMarketing=UIImage.$A(5423,19,2),UIImageTabRide=UIImage.$A(5442,16,4),UIImageTabRideOne=UIImage.$(5448),UIImageTabSceneryTrees=UIImage.$(5459),UIImageTabSceneryUrban=UIImage.$(5460),UIImageTabSceneryWalls=UIImage.$(5461),UIImageTabScenerySignage=UIImage.$(5462),UIImageTabSceneryPaths=UIImage.$(5463),UIImageTabSceneryPathItems=UIImage.$(5464),UIImageTabSceneryStatues=UIImage.$(5465),UIImageTabPark=UIImage.$(5466),UIImageTabWater=UIImage.$(5467),UIImageTabStatsOne=UIImage.$(5468),UIImageTabObjective=UIImage.$A(5511,16,4),UIImageTabAwards=UIImage.$(5527),UIImageTabRidesShop=UIImage.$A(5530,7,4),UIImageTabRidesTransport=UIImage.$A(5537,5,4),UIImageTabRidesGentle=UIImage.$A(5542,4,8),UIImageTabRidesRollerCoasters=UIImage.$A(5546,5,2),UIImageTabRidesWater=UIImage.$A(5551,6,4),UIImageTabRidesThrill=UIImage.$F([5562,5563,5562,5561,5560,5559,5558,5557,5557,5557,5557,5557,5557,5557,5557,5557,5558,5559,5560,5561],4),UIImageTabGuests=UIImage.$A(5568,8,4),UIImageAwardMostUntidy=UIImage.$(5469),UIImageAwardMostTidy=UIImage.$(5470),UIImageAwardBestRollerCoasters=UIImage.$(5471),UIImageAwardBestValue=UIImage.$(5472),UIImageAwardMostBeautiful=UIImage.$(5473),UIImageAwardWorstValue=UIImage.$(5474),UIImageAwardSafest=UIImage.$(5475),UIImageAwardBestStaff=UIImage.$(5476),UIImageAwardBestFood=UIImage.$(5477),UIImageAwardWorstFood=UIImage.$(5478),UIImageAwardBestRestrooms=UIImage.$(5479),UIImageAwardMostDisappointing=UIImage.$(5480),UIImageAwardBestWaterRides=UIImage.$(5481),UIImageAwardBestCustomDesignedRides=UIImage.$(5482),UIImageAwardMostDazzlingRideColors=UIImage.$(5483),UIImageAwardMostConfusingLayout=UIImage.$(5484),UIImageAwardBestGentleRides=UIImage.$(5485),UIImagePeepLargeFaceVeryVeryUnhappy=UIImage.$(5284),UIImagePeepLargeFaceVeryUnhappy=UIImage.$(5285),UIImagePeepLargeFaceUnhappy=UIImage.$(5286),UIImagePeepLargeFaceNormal=UIImage.$(5287),UIImagePeepLargeFaceHappy=UIImage.$(5288),UIImagePeepLargeFaceVeryHappy=UIImage.$(5289),UIImagePeepLargeFaceVeryVeryHappy=UIImage.$(5290),UIImagePeepLargeFaceTired=UIImage.$(5291),UIImagePeepLargeFaceVeryTired=UIImage.$(5292),UIImagePeepLargeFaceSick=UIImage.$(5293),UIImagePeepLargeFaceVerySick=UIImage.$A(5294,4,8),UIImagePeepLargeFaceVeryVerySick=UIImage.$A(5298,16,4),UIImagePeepLargeFaceAngry=UIImage.$A(5314,4,8),UIImagePeepSmallFaceVeryVeryUnhappy=UIImage.$(5486),UIImagePeepSmallFaceVeryUnhappy=UIImage.$(5487),UIImagePeepSmallFaceUnhappy=UIImage.$(5488),UIImagePeepSmallFaceNormal=UIImage.$(5489),UIImagePeepSmallFaceHappy=UIImage.$(5490),UIImagePeepSmallFaceVeryHappy=UIImage.$(5491),UIImagePeepSmallFaceVeryVeryHappy=UIImage.$(5492),UIImagePeepSmallFaceTired=UIImage.$(5493),UIImagePeepSmallFaceVeryTired=UIImage.$(5494),UIImagePeepSmallFaceSick=UIImage.$(5495),UIImagePeepSmallFaceVerySick=UIImage.$(5496),UIImagePeepSmallFaceVeryVerySick=UIImage.$(5497),UIImagePeepSmallFaceAngry=UIImage.$(5498),UIImageFloorTextureGrass=UIImage.$(5579),UIImageFloorTextureSand=UIImage.$(5580),UIImageFloorTextureDirt=UIImage.$(5581),UIImageFloorTextureRock=UIImage.$(5582),UIImageFloorTextureMartian=UIImage.$(5583),UIImageFloorTextureCheckerboard=UIImage.$(5584),UIImageFloorTextureGrassClumps=UIImage.$(5585),UIImageFloorTextureIce=UIImage.$(5586),UIImageFloorTextureGridRed=UIImage.$(5587),UIImageFloorTextureGridYellow=UIImage.$(5588),UIImageFloorTextureGridPurple=UIImage.$(5589),UIImageFloorTextureGridGreen=UIImage.$(5590),UIImageFloorTextureSandDark=UIImage.$(5591),UIImageFloorTextureSandLight=UIImage.$(5592),UIImageWallTextureRock=UIImage.$(5593),UIImageWallTextureWoodRed=UIImage.$(5594),UIImageWallTextureWoodBlack=UIImage.$(5595),UIImageWallTextureIce=UIImage.$(5596),UIImageMazeConstructionMove=UIImage.$(5577),UIImageConstructionDirectionNE=UIImage.$(5635),UIImageConstructionDirectionSE=UIImage.$(5636),UIImageConstructionDirectionSW=UIImage.$(5637),UIImageConstructionDirectionNW=UIImage.$(5638),UIImageConstructionFootpathLand=UIImage.$(5639),UIImageConstructionFootpathBridge=UIImage.$(5640),UIImageRideMazeWallHedgeThickFull=UIImage.$(21938),UIImageRideMazeWallHedgeThickSWNE=UIImage.$(21939),UIImageRideMazeWallHedgeThickNWSE=UIImage.$(21940),UIImageRideMazeWallHedgeMediumSWNE=UIImage.$(21941),UIImageRideMazeWallHedgeMediumNWSE=UIImage.$(21942),UIImageRideMazeWallHedgeThinSWNE=UIImage.$(21943),UIImageRideMazeWallHedgeThinNWSE=UIImage.$(21944),UIImageRideMazeWallBrickThickFull=UIImage.$(21951),UIImageRideMazeWallBrickThickSWNE=UIImage.$(21952),UIImageRideMazeWallBrickThickNWSE=UIImage.$(21953),UIImageRideMazeWallBrickMediumSWNE=UIImage.$(21954),UIImageRideMazeWallBrickMediumNWSE=UIImage.$(21955),UIImageRideMazeWallBrickThinSWNE=UIImage.$(21956),UIImageRideMazeWallBrickThinNWSE=UIImage.$(21957),UIImageRideMazeWallIceThickFull=UIImage.$(21964),UIImageRideMazeWallIceThickSWNE=UIImage.$(21965),UIImageRideMazeWallIceThickNWSE=UIImage.$(21966),UIImageRideMazeWallIceMediumSWNE=UIImage.$(21967),UIImageRideMazeWallIceMediumNWSE=UIImage.$(21968),UIImageRideMazeWallIceThinSWNE=UIImage.$(21969),UIImageRideMazeWallIceThinNWSE=UIImage.$(21970),UIImageRideMazeWallWoodenThickFull=UIImage.$(21977),UIImageRideMazeWallWoodenThickSWNE=UIImage.$(21978),UIImageRideMazeWallWoodenThickNWSE=UIImage.$(21979),UIImageRideMazeWallWoodenMediumSWNE=UIImage.$(21980),UIImageRideMazeWallWoodenMediumNWSE=UIImage.$(21981),UIImageRideMazeWallWoodenThinSWNE=UIImage.$(21982),UIImageRideMazeWallWoodenThinNWSE=UIImage.$(21983),UIImageFirecracker=UIImage.$A(22927,28,2),UIImageLandOwnershipAvailable=UIImage.$(22955),UIImageLandConstructionRightsAvailable=UIImage.$(22956),UIImageNextWeather=UIImage.$(23189),UIImageWeatherSun=UIImage.$(23190),UIImageWeatherSunCloud=UIImage.$(23191),UIImageWeatherCloud=UIImage.$(23192),UIImageWeatherLightRain=UIImage.$(23193),UIImageWeatherHeavyRain=UIImage.$(23194),UIImageWeatherStorm=UIImage.$(23195),UIImageWeatherSnow=UIImage.$(23196),UIImageRatingLow=UIImage.$(23197),UIImageRatingHigh=UIImage.$(23198),UIImageMenuCheckmark=UIImage.$(23199),UIImageMenuNewGame=UIImage.$(23207),UIImageMenuLoadGame=UIImage.$(23208),UIImageMenuTutorial=UIImage.$(23209),UIImageMenuExit=UIImage.$(23210),UIImageMenuToolbox=UIImage.$(23211),UIImageMenuLogo=UIImage.$(23212),UIImageMenuLogoSmall=UIImage.$(23213),UIImageFlatTextureGrass1=UIImage.$(28959),UIImageFlatTextureGrass2=UIImage.$(28960),UIImageFlatTextureGrass3=UIImage.$(28961),UIImageFlatTextureGrass4=UIImage.$(28962),UIImageFlatTextureGrass5=UIImage.$(28963),UIImageFlatTextureGrass6=UIImage.$(28964),UIImageFlatTextureSandLight1=UIImage.$(28965),UIImageFlatTextureSandLight2=UIImage.$(28966),UIImageFlatTextureSandLight3=UIImage.$(28967),UIImageFlatTextureSandLight4=UIImage.$(28968),UIImageFlatTextureSandLight5=UIImage.$(28969),UIImageFlatTextureSandLight6=UIImage.$(28970),UIImageFlatTextureSandDark1=UIImage.$(28971),UIImageFlatTextureSandDark2=UIImage.$(28972),UIImageFlatTextureSandDark3=UIImage.$(28973),UIImageFlatTextureSandDark4=UIImage.$(28974),UIImageFlatTextureSandDark5=UIImage.$(28975),UIImageFlatTextureSandDark6=UIImage.$(28976),UIImageFlatTextureDirt1=UIImage.$(28977),UIImageFlatTextureDirt2=UIImage.$(28978),UIImageFlatTextureDirt3=UIImage.$(28979),UIImageFlatTextureDirt4=UIImage.$(28980),UIImageFlatTextureDirt5=UIImage.$(28981),UIImageFlatTextureDirt6=UIImage.$(28982),UIImageFlatTextureSand1=UIImage.$(28983),UIImageFlatTextureSand2=UIImage.$(28984),UIImageFlatTextureSand3=UIImage.$(28985),UIImageFlatTextureSand4=UIImage.$(28986),UIImageFlatTextureSand5=UIImage.$(28987),UIImageFlatTextureSand6=UIImage.$(28988),UIImageFlatTextureRock1=UIImage.$(28989),UIImageFlatTextureRock2=UIImage.$(28990),UIImageFlatTextureRock3=UIImage.$(28991),UIImageFlatTextureRock4=UIImage.$(28992),UIImageFlatTextureRock5=UIImage.$(28993),UIImageFlatTextureRock6=UIImage.$(28994),UIImageFlatTextureMartian1=UIImage.$(28995),UIImageFlatTextureMartian2=UIImage.$(28996),UIImageFlatTextureMartian3=UIImage.$(28997),UIImageFlatTextureMartian4=UIImage.$(28998),UIImageFlatTextureMartian5=UIImage.$(28999),UIImageFlatTextureMartian6=UIImage.$(29e3),UIImageFlatTextureGrassClumps1=UIImage.$(29001),UIImageFlatTextureGrassClumps2=UIImage.$(29002),UIImageFlatTextureGrassClumps3=UIImage.$(29003),UIImageFlatTextureGrassClumps4=UIImage.$(29004),UIImageFlatTextureGrassClumps5=UIImage.$(29005),UIImageFlatTextureGrassClumps6=UIImage.$(29006),UIImageFlatTextureIce1=UIImage.$(29007),UIImageFlatTextureIce2=UIImage.$(29008),UIImageFlatTextureIce3=UIImage.$(29009),UIImageFlatTextureIce4=UIImage.$(29010),UIImageFlatTextureIce5=UIImage.$(29011),UIImageFlatTextureIce6=UIImage.$(29012),UIImageWallMedievalGray=UIImage.$(112511),UIImageWallTin=UIImage.$(124211),UIImageWallSandBrick=UIImage.$(152747),UIImageWallRustyTin=UIImage.$(163772),UIImageWallSand=UIImage.$(163784),UIImageWallLightSand=UIImage.$(168735),UIImageWallBordeauxRed=UIImage.$(171630),UIImageWallViolet=UIImage.$(171641),UIImageG2Logo=UIImage.$(29357),UIImageG2Title=UIImage.$(29358),UIImageG2Fastforward=UIImage.$(29359),UIImageG2SpeedArrow=UIImage.$(29360),UIImageG2HyperArrow=UIImage.$(29361),UIImageG2TabLand=UIImage.$(29362),UIImageG2Placeholder=UIImage.$(29363),UIImageG2ZoomIn=UIImage.$(29364),UIImageG2ZoomOut=UIImage.$(29366),UIImageG2TabTree=UIImage.$(29368),UIImageG2TabPencil=UIImage.$(29369),UIImageG2LargeScenery=UIImage.$(29370),UIImageG2Trees=UIImage.$(29371),UIImageG2Footpath=UIImage.$(29372),UIImageG1CloseDisable=UIImage.$(29373),UIImageG1CloseEnable=UIImage.$(29375),UIImageG1TestDisable=UIImage.$(29377),UIImageG1TestEnable=UIImage.$(29379),UIImageG1OpenDisable=UIImage.$(29381),UIImageG1OpenEnable=UIImage.$(29383),UIImageG2Simulate=UIImage.$(29481),UIImageG1SimulateDisable=UIImage.$(29482),UIImageG1SimulateEnable=UIImage.$(29483),UIImageG2Restart=UIImage.$(29385),UIImageG2Stop=UIImage.$(29386),UIImageG2Play=UIImage.$(29387),UIImageG2Skip=UIImage.$(29388),UIImageG2Sandbox=UIImage.$(29389),UIImageG2TabNews=UIImage.$(29414),UIImageG2Locked=UIImage.$(29415),UIImageG2MenuMultiplayer=UIImage.$(29416),UIImageG2Sort=UIImage.$(29433),UIImageG2Copy=UIImage.$(29434),UIImageG2Paste=UIImage.$(29435),UIImageG2Search=UIImage.$(29461),UIImageG2Pipette=UIImage.$(29467),UIImageG2Chat=UIImage.$(29468),UIImageG2SceneryScatterLow=UIImage.$(29489),UIImageG2SceneryScatterMedium=UIImage.$(29490),UIImageG2SceneryScatterHigh=UIImage.$(29491),UIImageG2View=UIImage.$(29494),UICheckbox=function(i){function n(t){var e=i.call(this)||this;return e._isChecked=!1,e._text=null!=t?t:"",e}return __extends(n,i),n.$=function(t,e){void 0===e&&(e=!1);var i=new n(t),t=t.containerSize(),t={width:t.width+11,height:t.height},i=i.size({height:11}).minSize(t);return e?i.size({width:t.width}):i},n.$UN=function(){return new n(void 0).size({width:11,height:11})},n.prototype._build=function(){var e=this;this._widget=__assign(__assign({},this._buildBaseValues()),{type:"checkbox",text:this._applyFont(this._text),isChecked:this._isChecked,onChange:function(t){e._isChecked=t,null!==(t=e._onChange)&&void 0!==t&&t.call(e,e,e._isChecked)}})},n.prototype._update=function(t){i.prototype._update.call(this,t),t.text=this._applyFont(this._text),t.isChecked=this._isChecked},n.prototype._isUnnamed=function(){return void 0===this._text},n.prototype.isChecked=function(t){return this._isChecked=t,this},n.prototype.getIsChecked=function(){return this._isChecked},n.prototype.text=function(t){return this._text=t,this},n.prototype.getText=function(){return this._text},n.prototype.toggle=function(){return this.isChecked(!this._isChecked)},n.prototype.onChange=function(t){return this._onChange=t,this},n}(UIWidget),UIColorPicker=function(i){function e(t){var e=i.call(this)||this;return e._color=null!=t?t:UIColor.Black,e}return __extends(e,i),e.$=function(t){return new e(t=void 0===t?void 0:t).size({width:12,height:12})},e.prototype._build=function(){var e=this;this._widget=__assign(__assign({},this._buildBaseValues()),{type:"colourpicker",colour:this._color,onChange:function(t){e._color=t,null!==(t=e._onChange)&&void 0!==t&&t.call(e,e,e._color)}})},e.prototype._update=function(t){i.prototype._update.call(this,t),t.colour=this._color},e.prototype.color=function(t){return this._color=t,this},e.prototype.getColor=function(){return this._color},e.prototype.onChange=function(t){return this._onChange=t,this},e}(UIWidget),UIDropdown=function(i){function n(t){var e=i.call(this)||this;return e._selectedIndex=0,e._items=t,e}return __extends(n,i),n.$=function(t){var e=new n(t),t=t.map(function(t){return t.containerSize().width}).max();return e.size({height:15}).minSize({width:t+11,height:15})},n.prototype._build=function(){var i=this;this._widget=__assign(__assign({},this._buildBaseValues()),{type:"dropdown",textAlign:UITextAlignment.Center,items:this._items.map(function(t){return i._applyFont(t)}),selectedIndex:this._selectedIndex,onChange:function(t){i._selectedIndex=t;var e=i._items[t];null!==(t=i._onChange)&&void 0!==t&&t.call(i,i,i._selectedIndex,e)}})},n.prototype._update=function(t){var e=this;i.prototype._update.call(this,t),t.items=this._items.map(function(t){return e._applyFont(t)}),t.selectedIndex=this._selectedIndex},n.prototype.getItems=function(){return this._items},n.prototype.selected=function(t){if(t<this._items.length&&0<=t)return this._selectedIndex=t,this;t=Math.max(0,this._items.length-1);throw new Error("Enter a value between 0 and "+t+".")},n.prototype.getSelectedIndex=function(){return this._selectedIndex},n.prototype.onChange=function(t){return this._onChange=t,this},n}(UIWidget),UIImageView=function(i){function e(t){void 0===t&&(t=void 0);var e=i.call(this)||this;return e._image=UIImageNone,e._theme={tertiary:UIColor.Yellow},e.image(t),e}return __extends(e,i),e.$=function(t){return new e(t=void 0===t?void 0:t)},e.prototype._build=function(){var e=this;this._widget=__assign(__assign({},this._buildBaseValues()),{type:"custom",onDraw:function(t){e._graphicsContext=t,e._onDraw(e._image.singleFrame())}})},e.prototype._onDraw=function(t){var e,i,n=this._graphicsContext;void 0!==n&&(i=this._interactor.getWindowTheme(),n.colour=null!==(e=this._theme.primary)&&void 0!==e?e:i.primary,n.paletteId=null!==(e=this._theme.primary)&&void 0!==e?e:i.primary,n.secondaryColour=null!==(e=this._theme.secondary)&&void 0!==e?e:i.secondary,n.ternaryColour=null!==(e=this._theme.tertiary)&&void 0!==e?e:i.tertiary,i=null!==(i=null===(i=n.getImage(t))||void 0===i?void 0:i.offset)&&void 0!==i?i:UIPointZero,n.image(t,-i.x,-i.y))},e.prototype.image=function(t){this._image=void 0===t?UIImage.$(-1):"number"==typeof t?UIImage.$(t):t;t=this._image.size(),t={width:t.width+2,height:t.height+1};return this.size(t),this},e.prototype.getImage=function(){return this._image},e.prototype.theme=function(t){return this._theme=t,this},e.prototype.getTheme=function(){return this._theme},e}(UIWidget),UILabel=function(i){function n(t){var e=i.call(this)||this;return e._align=UITextAlignment.Left,e._text=t,e}return __extends(n,i),n.$=function(t,e){void 0===e&&(e=!0);var i=new n(t),t=t.containerSize();return(e?i.size(t):i).minSize(t)},n.prototype._build=function(){var i=this;this._widget=__assign(__assign({},this._buildBaseValues()),{type:"label",text:this._applyFont(this._text),textAlign:this._align,onChange:function(t){var e;null!==(e=i._onChange)&&void 0!==e&&e.call(i,i,t)}})},n.prototype._update=function(t){i.prototype._update.call(this,t),t.text=this._applyFont(this._text),t.textAlign=this._align},n.prototype.align=function(t){return this._align=t,this},n.prototype.getAlign=function(){return this._align},n.prototype.text=function(t){t=(this._text=t).containerSize();return this.minSize(t),this},n.prototype.getText=function(){return this._text},n.prototype.onChange=function(t){return this._onChange=t,this},n}(UIWidget),UISpacer=function(i){function e(t){void 0===t&&(t=void 0);var e=i.call(this)||this;return e._spacing=t,e}return __extends(e,i),e.$=function(t){return new e(t=void 0===t?void 0:t)},e.prototype._isUndefinedSize=function(t){return t===this._axis&&i.prototype._isUndefinedSize.call(this,t)},e.prototype._confirm=function(t){switch(this._axis=t){case UIAxis.Vertical:this._size={width:void 0,height:this._spacing};break;case UIAxis.Horizontal:this._size={width:this._spacing,height:void 0}}},e.prototype._build=function(){this._widget=__assign(__assign({},this._buildBaseValues()),{type:"label"})},e.prototype.getAxis=function(){return this._axis},e.prototype.getSpacing=function(){return this._spacing},e}(UIWidget),UISpinner=function(e){function t(){var t=e.call(this)||this;return t._min=0,t._max=1,t._value=.5,t._step=.1,t._dialogueTitle="Title",t._dialogueMessage="Message{NEWLINE}(Set it using function 'dialogueInfo')",t._dialogueMaxLength=256,t}return __extends(t,e),t.$=function(){return(new t).size({height:15}).minSize({width:50,height:15})},t.prototype._build=function(){var i=this;this._usingFormatter()?this._text=this._formatter(this._value):this._text=this._value.toFixed(this.__fixed()),this._widget=__assign(__assign({},this._buildBaseValues()),{type:"spinner",text:this._applyFont(this._text),onDecrement:function(){var t=i._value;i._value=Math.max(i._value-i._step,i._min),i._signal(t,i._value)},onIncrement:function(){var t=i._value;i._value=Math.min(i._value+i._step,i._max),i._signal(t,i._value)},onClick:function(){var t=(null!==(t=null===(t=i._text)||void 0===t?void 0:t.length)&&void 0!==t?t:0)+1,t=Math.max(i._dialogueMaxLength,t),t={title:i._dialogueTitle,description:i._dialogueMessage,initialValue:i._value.toString(),maxLength:t,callback:function(t){var e=i._value;i._value=Math.max(Math.min(parseFloat(t),i._max),i._min),i._signal(e,i._value)}};ui.showTextInput(t)}})},t.prototype._signal=function(t,e){var i=e.toFixed(this.__fixed()),n=0..toFixed(this.__fixed()),o=i==="-"+n,r=void 0!==this._formatter;t.toFixed(this.__fixed())!=i&&(this._text=r?o?this._formatter(0):this._formatter(e):o?n:i,this.updateUI(),null!==(i=this._onChange)&&void 0!==i&&i.call(this,this,e))},t.prototype._update=function(t){e.prototype._update.call(this,t),t.text=this._applyFont(this._text)},t.prototype.__fixed=function(){var t;return null!==(t=this._fixed)&&void 0!==t?t:1},t.prototype._usingFormatter=function(){return void 0!==this._formatter},t.prototype._updateMinWidth=function(){var t=this._min<0?4:0,e=this._usingFormatter()?this._formatter(this._max):this._max.toFixed(this.__fixed()),t=e.containerSize().width+t;this.minSize({width:t+22})},t.prototype.range=function(t){var e=null!==(e=t.min)&&void 0!==e?e:Number.MIN_SAFE_INTEGER,t=null!==(t=t.min)&&void 0!==t?t:Number.MAX_SAFE_INTEGER;return t<e?console.log("'min' cannot be greater than 'max'."):(this._min=e,this._max=t),this._updateMinWidth(),this},t.prototype.step=function(t){if(this._step=t,void 0===this._fixed)for(var e=0;e<1/0;e++)if(t*Math.pow(10,e)%1==0){this._fixed=e;break}return this._updateMinWidth(),this},t.prototype.getStep=function(){return this._step},t.prototype.fixed=function(t){return this._fixed=t,this._updateMinWidth(),this},t.prototype.getFixed=function(){var t;return null!==(t=this._fixed)&&void 0!==t?t:1},t.prototype.value=function(t){return this._value=Math.max(this._min,Math.min(this._max,t)),this._updateMinWidth(),this},t.prototype.getValue=function(){return this._value},t.prototype.formatter=function(t){return this._formatter=t,this._updateMinWidth(),this},t.prototype.getFormatter=function(){return this._formatter},t.prototype.onChange=function(t){return this._onChange=t,this},t.prototype.dialogueInfo=function(t,e,i){return void 0===i&&(i=256),this._dialogueTitle=t,this._dialogueMessage=e,this._dialogueMaxLength=i,this},t}(UIWidget),UITextBox=function(i){function e(t){void 0===t&&(t=void 0);var e=i.call(this)||this;return e._maxLength=256,e._text=null!=t?t:"",e}return __extends(e,i),e.$=function(t){return new e(t=void 0===t?void 0:t).size({height:15}).minSize({width:50,height:15})},e.prototype._build=function(){var i=this;this._widget=__assign(__assign({},this._buildBaseValues()),{type:"textbox",text:this._text,maxLength:this._maxLength,onChange:function(t){var e;i._text=t,null!==(e=i._onChange)&&void 0!==e&&e.call(i,i,t)}})},e.prototype._update=function(t){i.prototype._update.call(this,t),t.text=this._text,t.maxLength=this._maxLength},e.prototype.text=function(t){return this._text=t,this},e.prototype.getText=function(){return this._text},e.prototype.maxLength=function(t){return this._maxLength=t,this},e.prototype.getMaxLength=function(){return this._maxLength},e.prototype.onChange=function(t){return this._onChange=t,this},e}(UIWidget),UIButton=function(e){function t(){var t=e.call(this)||this;return t._border=!0,t._isPressed=!1,t}return __extends(t,e),t.$=function(t,e){void 0===e&&(e=!1);var i=(new this).title(t),t=t.containerSize();return(e?i.size(t):i).minSize(t)},t.$I=function(t){var e=new this,i=t.size(),i={width:i.width+3,height:i.height+2};return e.image(t).size(i).minSize(i)},t.prototype._build=function(){var e=this;this._widget=__assign(__assign({},this._buildBaseValues()),{type:"button",border:this._border,image:this._image,isPressed:this._isPressed,text:this._applyFont(this._title),onClick:function(){var t;null!==(t=e._onClick)&&void 0!==t&&t.call(e,e),e._internalOnChange()}})},t.prototype._update=function(t){e.prototype._update.call(this,t),t.border=this._border,void 0!==this._image&&(t.image=this._image),t.isPressed=this._isPressed,void 0!==this._title&&(t.text=this._applyFont(this._title))},t.prototype._isImageType=function(){return void 0!==this._image},t.prototype._internalOnChange=function(){},t.prototype.border=function(t){return this._isImageType()||(this._border=t),this},t.prototype.getBorder=function(){return this._border},t.prototype.image=function(i){var n,o=this;return this._uiImage=i,intervalHelper.end(this._name),i.isAnimatable()&&(n=0,intervalHelper.start(this._name,20*i.getDuration(),function(){var t=n%i._getFrames().length,e=i._getFrames()[t];o.updateUI(function(t){t._image=e}),n+=1})),this._image=i._getFrames()[0],this._border=!1,this},t.prototype.getImage=function(){var t;return null!==(t=this._uiImage)&&void 0!==t?t:UIImageNone},t.prototype.isImageEqual=function(t){var e;return null!==(t=null===(e=this._uiImage)||void 0===e?void 0:e.isEqual(t))&&void 0!==t&&t},t.prototype.isPressed=function(t){return this._isPressed=t,this},t.prototype.getIsPressed=function(){return this._isPressed},t.prototype.title=function(t){return this._isImageType()||(this._title=t),this},t.prototype.getTitle=function(){return this._title},t.prototype.onClick=function(t){return this._onClick=t,this},t}(UIWidget),UIPageImageButton=function(i){function r(t){var e=i.call(this)||this;return e._index=0,e._images=t,e}return __extends(r,i),r.$IP=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=new r(t),n=0<t.length?t[0]:UIImageNone,o=t.map(function(t){return t.size()}).reduce(function(t,e){return{width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)}}),o={width:o.width+3,height:o.height+2};return i.image(n).size(o).minSize(o)},r.prototype._internalOnChange=function(){var t;this._index=(this._index+1)%this._images.length;var e=this._images[this._index];this.updateUI(function(t){return t.image(e)}),null!==(t=this._onPage)&&void 0!==t&&t.call(this,this,e)},r.prototype.getImages=function(){return this._images},r.prototype.getCurrentIndex=function(){return this._index},r.prototype.onPage=function(t){return this._onPage=t,this},r}(UIButton),UIToggleButton=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._internalOnChange=function(){var t,e=!(null!==(t=this._widget.isPressed)&&void 0!==t&&t);this.updateUI(function(t){return t.isPressed(e)}),null!==(t=this._onPress)&&void 0!==t&&t.call(this,this,e)},e.prototype.onPress=function(t){return this._onPress=t,this},e.prototype.toggle=function(){return this._isPressed=!this._isPressed,this},e}(UIButton),UIListViewColumn=function(){function i(t){this._canSort=!1,this._sortOrder=UISortOrder.None,this._header=t}return i.$=function(t){return new i(t)},i.$F=function(t,e){return new i(t).width(e)},i.$R=function(t,e){t=new i(t);return void 0!==e.min&&(t=t.minWidth(e.min)),t=void 0!==e.max?t.maxWidth(e.max):t},i.$W=function(t,e){return new i(t).weight(e)},i.prototype._data=function(t){return{canSort:this._canSort,sortOrder:this._sortOrder,header:t(this._header),headerTooltip:this._headerTooltip,width:this._width,ratioWidth:this._weight,minWidth:this._minWidth,maxWidth:this._maxWidth}},i.prototype.sortOrder=function(t){return this._sortOrder=t,this},i.prototype.getSortOrder=function(){return this._sortOrder},i.prototype.canSort=function(t){return this._canSort=t,this},i.prototype.getCanSort=function(){return this._canSort},i.prototype.tooltip=function(t){return this._headerTooltip=t,this},i.prototype.getTooltip=function(){return this._headerTooltip},i.prototype.width=function(t){return this._width=t,this},i.prototype.getWidth=function(){return this._width},i.prototype.weight=function(t){return this._weight=t,this},i.prototype.getWeight=function(){return this._width},i.prototype.minWidth=function(t){return this._minWidth=t,this},i.prototype.maxWidth=function(t){return this._maxWidth=t,this},i.prototype.getWidthRange=function(){return{min:this._minWidth,max:this._maxWidth}},i}(),UIListViewItem=function(){function e(t,e){void 0===t&&(t=[]),this._isSeparator=!1,this._textList=t}return e.$=function(t){return new e(t)},e.$S=function(t){return new e([t=void 0===t?void 0:t])},e.prototype._data=function(e){if(this._isSeparator){var t=0<this._textList.length?this._textList[0]:void 0;return{type:"seperator",text:e(t)}}return this._textList.map(function(t){return e(t)})},e.prototype.getIsSeparator=function(){return this._isSeparator},e.prototype.getElements=function(){return this._textList},e}(),UIListView=function(n){function e(t){void 0===t&&(t=void 0);var e=n.call(this)||this;return e._scrollbarType=UIScrollbarType.None,e._isStriped=!1,e._showColumnHeaders=!1,e._items=[],e._canSelect=!1,e._columns=t,e}return __extends(e,n),e.$=function(t){return new e(t=void 0===t?void 0:t).minSize(100)},e.prototype._build=function(){var t,n=this;this._widget=__assign(__assign({},this._buildBaseValues()),{type:"listview",scrollbars:this._scrollbarType,isStriped:this._isStriped,showColumnHeaders:this._showColumnHeaders,columns:null===(t=this._columns)||void 0===t?void 0:t.map(function(t){return t._data(function(t){return n._applyFont(t)})}),items:this._items.map(function(t){return t._data(function(t){return n._applyFont(t)})}),selectedCell:this._selectedCell,canSelect:this._canSelect,onHighlight:function(t,e){var i;null!==(i=n._onHeighlight)&&void 0!==i&&i.call(n,n,e,t)},onClick:function(t,e){var i;null!==(i=n._onClick)&&void 0!==i&&i.call(n,n,e,t)}})},e.prototype._update=function(t){var e,i=this;n.prototype._update.call(this,t),t.scrollbars=this._scrollbarType,t.isStriped=this._isStriped,t.showColumnHeaders=this._showColumnHeaders,t.columns=null===(e=this._columns)||void 0===e?void 0:e.map(function(t){return t._data(function(t){return i._applyFont(t)})}),t.items=this._items.map(function(t){return t._data(function(t){return i._applyFont(t)})}),t.selectedCell=this._selectedCell,t.canSelect=this._canSelect},e.prototype.scrollbarType=function(t){return this._scrollbarType=t,this},e.prototype.getScrollbarType=function(){return this._scrollbarType},e.prototype.isStriped=function(t){return this._isStriped=t,this},e.prototype.getIsStriped=function(){return this._isStriped},e.prototype.showColumnHeaders=function(t){return this._showColumnHeaders=t,this},e.prototype.getShowColumnHeaders=function(){return this._showColumnHeaders},e.prototype.addColumn=function(t){var e;return null!==(e=this._columns)&&void 0!==e&&e.push(t),this},e.prototype.addColumns=function(t){var e;return this._columns=null===(e=this._columns)||void 0===e?void 0:e.concat(t),this},e.prototype.addItem=function(t){return this._items.push(t),this},e.prototype.addItems=function(t){return this._items=this._items.concat(t),this},e.prototype.clearAllItems=function(){return this._items=[],this},e.prototype.selectCell=function(t,e){return this._selectedCell={row:t,column:e},this},e.prototype.getSelectedCell=function(){return this._selectedCell},e.prototype.canSelect=function(t){return this._canSelect=t,this},e.prototype.getCanSelect=function(){return this._canSelect},e.prototype.getColumnData=function(t){var e;return null===(e=this._columns)||void 0===e?void 0:e[t]},e.prototype.getItemData=function(t){var e;return null===(e=this._items)||void 0===e?void 0:e[t]},e.prototype.getHighlightedCell=function(){return this._widget.highlightedCell},e.prototype.onHeighlight=function(t){return this._onHeighlight=t,this},e.prototype.onClick=function(t){return this._onClick=t,this},e.prototype.getColumns=function(){var t;return null!==(t=this._columns)&&void 0!==t?t:[]},e.prototype.getItems=function(){return this._items},e}(UIWidget);!function(t){t[t.None=0]="None",t[t.UndergroundInside=1]="UndergroundInside",t[t.SeethroughRides=2]="SeethroughRides",t[t.SeethroughScenery=4]="SeethroughScenery",t[t.InvisibleSupports=8]="InvisibleSupports",t[t.LandHeights=16]="LandHeights",t[t.TrackHeights=32]="TrackHeights",t[t.PathHeights=64]="PathHeights",t[t.Gridlines=128]="Gridlines",t[t.LandOwnership=256]="LandOwnership",t[t.ConstructionRights=512]="ConstructionRights",t[t.SoundOn=1024]="SoundOn",t[t.InvisiblePeeps=2048]="InvisiblePeeps",t[t.HideBase=4096]="HideBase",t[t.HideVertical=8192]="HideVertical",t[t.InvisibleSprites=32768]="InvisibleSprites",t[t.Unknown=32768]="Unknown",t[t.SeethroughPaths=65536]="SeethroughPaths",t[t.ClipView=131072]="ClipView",t[t.HighlightPathIssues=262144]="HighlightPathIssues",t[t.TransparentBackground=524288]="TransparentBackground"}(UIViewportFlag=UIViewportFlag||{}),function(t){t[t.One=0]="One",t[t.Half=1]="Half",t[t.Quater=2]="Quater",t[t.Eighth=3]="Eighth"}(UIViewportScale=UIViewportScale||{}),function(t){t[t.A0=0]="A0",t[t.A90=1]="A90",t[t.A180=2]="A180",t[t.A270=3]="A270"}(UIViewportAngle=UIViewportAngle||{});var UIViewport=function(e){function t(){var t=e.call(this)||this;return t._rotation=ui.mainViewport.rotation,t._zoom=ui.mainViewport.zoom,t._visibilityFlags=UIViewportFlag.None,t._position=ui.mainViewport.getCentrePosition(),t}return __extends(t,e),t.$=function(){return(new t).minSize(100)},t.prototype._build=function(){var t;this._viewport={left:this._origin.x,top:this._origin.y,right:this._origin.x+(null!==(t=this._size.width)&&void 0!==t?t:0),bottom:this._origin.y+(null!==(t=this._size.height)&&void 0!==t?t:0),rotation:this._rotation,zoom:this._zoom,visibilityFlags:this._visibilityFlags},this._widget=__assign(__assign({},this._buildBaseValues()),{type:"viewport",viewport:this._viewport})},t.prototype._update=function(t){e.prototype._update.call(this,t),this._viewport.left=this._origin.x,this._viewport.top=this._origin.y,this._viewport.right=this._origin.x+(null!==(t=this._size.width)&&void 0!==t?t:0),this._viewport.bottom=this._origin.y+(null!==(t=this._size.height)&&void 0!==t?t:0),this._viewport.rotation=this._rotation,this._viewport.zoom=this._zoom,this._viewport.visibilityFlags=this._visibilityFlags,this.moveTo(this._position)},t.prototype._loadWidget=function(){e.prototype._loadWidget.call(this),this._viewport=this._widget.viewport,this._zoom=ui.mainViewport.zoom,this._viewport.zoom=this._zoom,this._viewport.visibilityFlags=this._visibilityFlags,this.moveTo(this._position)},t.prototype.position=function(t){return this._position=t,this},t.prototype.getPosition=function(){return this._position},t.prototype.rotation=function(t){return this._rotation=t,this},t.prototype.getRotation=function(){return this._rotation},t.prototype.zoom=function(t){return this._zoom=t,this},t.prototype.getZoom=function(){return this._zoom},t.prototype.flags=function(t){return this._visibilityFlags=t,this},t.prototype.getFlags=function(){return this._visibilityFlags},t.prototype.getCenterPosition=function(){return this._viewport.getCentrePosition()},t.prototype.moveTo=function(t){var e;this._position=t,void 0!==(null===(e=this._viewport)||void 0===e?void 0:e.moveTo)&&this._viewport.moveTo(t)},t.prototype.scrollTo=function(t){var e;this._position=t,void 0!==(null===(e=this._viewport)||void 0===e?void 0:e.scrollTo)&&this._viewport.scrollTo(t)},t.prototype.scrollToMainViewportCenter=function(){this.scrollTo(ui.mainViewport.getCentrePosition())},t.prototype.moveToMainViewportCenter=function(){this.moveTo(ui.mainViewport.getCentrePosition())},t.prototype.mainViewportScrollToThis=function(){void 0!==this._viewport&&ui.mainViewport.scrollTo(this.getCenterPosition())},t}(UIWidget);